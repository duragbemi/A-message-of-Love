;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f8f958de-9369-a775-233d-608e397e8eb6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,421778,e=>{"use strict";var t=e.i(478902),s=e.i(55956),a=e.i(210419),r=e.i(389959);e.i(128328);var i=e.i(158639),l=e.i(787845),n=e.i(17203),o=e.i(857889),c=e.i(775114),d=e.i(296003),u=e.i(494031),h=e.i(215618),m=e.i(215312),x=e.i(438824),p=e.i(230052),f=e.i(317040),g=e.i(441081),j=e.i(602089),b=e.i(627069),y=e.i(492418),v=e.i(500850),N=e.i(283606),S=e.i(314805),_=e.i(408279),w=e.i(108151);let C=()=>{let e,{ref:s}=(0,i.useParams)(),[C,k]=(0,r.useState)("security"),{data:A,isPending:T}=(0,x.useProjectLintsQuery)({projectRef:s}),{data:E,isLoading:I}=(0,u.useQueryPerformanceQuery)({preset:"slowestExecutionTime"}),L=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:R}=(0,g.useSidebarManagerSnapshot)(),{setSelectedItem:P}=(0,p.useAdvisorStateSnapshot)(),D=(0,r.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("SECURITY")),[A]),O=(0,r.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("PERFORMANCE")),[A]),U=D.filter(e=>e.level===c.LINTER_LEVELS.ERROR).length,z=D.filter(e=>e.level===c.LINTER_LEVELS.WARN).length,M=O.filter(e=>e.level===c.LINTER_LEVELS.ERROR).length,$=O.filter(e=>e.level===c.LINTER_LEVELS.WARN).length,H=(0,r.useMemo)(()=>(E??[]).slice(0,5),[E]),B=(0,r.useCallback)(e=>{P(e.cache_key,"lint"),R(h.SIDEBAR_KEYS.ADVISOR_PANEL)},[P,R]),F=U+z+M+$,W=U>0||M>0,Q=z>0||$>0;if(0===F)e=(0,t.jsx)("h2",{children:"No issues available"});else{let s=1===F?"issue":"issues",a=F.toString(),r="";W?r="text-destructive":Q&&(r="text-warning"),e=(0,t.jsxs)("h2",{children:[a," ",s," need",1===F?"s":""," ",(0,t.jsx)("span",{className:r,children:"attention"})]})}let q=(e,s,a,r,i)=>{let l=s.filter(e=>e.level===c.LINTER_LEVELS.ERROR||e.level===c.LINTER_LEVELS.WARN).sort((e,t)=>e.level===c.LINTER_LEVELS.ERROR?-1:1);return(0,t.jsxs)("div",{className:"h-full",children:[i&&(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}),!i&&(a>0||r>0)&&(0,t.jsx)("ul",{children:l.map(e=>{let s=e.detail?e.detail:e.title;return(0,t.jsx)("li",{className:"text-sm w-full border-b my-0 last:border-b-0 group px-4 ",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full group",children:[(0,t.jsxs)("button",{onClick:()=>B(e),className:"flex items-center gap-2 transition truncate flex-1 min-w-0 py-3 text-left",children:[(0,t.jsx)(d.EntityTypeIcon,{type:e.metadata?.type}),(0,t.jsx)("p",{className:"flex-1 font-mono text-xs leading-6 text-xs text-foreground-light group-hover:text-foreground truncate",children:s.replace(/\\`/g,"`")})]}),(0,t.jsx)(m.ButtonTooltip,{type:"text",className:"px-1 opacity-0 group-hover:opacity-100 w-7",icon:(0,t.jsx)(j.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),R(h.SIDEBAR_KEYS.AI_ASSISTANT),L.newChat({name:"Summarize lint",initialInput:(0,d.createLintSummaryPrompt)(e)})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]})},e.cache_key)})}),!i&&0===a&&0===r&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(o.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["No ",e.toLowerCase()," issues found"]})]})]})};return(0,t.jsxs)("div",{className:"@container",children:[T?(0,t.jsx)(w.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:e}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @xl:grid-cols-2 gap-4",children:[(0,t.jsx)(b.Card,{className:"h-80",children:(0,t.jsxs)(v.Tabs_Shadcn_,{value:C,className:"h-full flex flex-col",children:[(0,t.jsxs)(b.CardHeader,{className:"h-10 py-0 pl-4 pr-2 flex flex-row items-center justify-between flex-0",children:[(0,t.jsxs)(S.TabsList_Shadcn_,{className:"flex justify-start rounded-none gap-x-4 border-b-0 !mt-0 pt-0",children:[(0,t.jsxs)(_.TabsTrigger_Shadcn_,{value:"security",onClick:()=>k("security"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Security"," ",U+z>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:U+z})]}),(0,t.jsxs)(_.TabsTrigger_Shadcn_,{value:"performance",onClick:()=>k("performance"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Performance"," ",M+$>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:M+$})]})]}),(0,t.jsx)(m.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:`Open ${C} Advisor`,className:"capitalize"}},children:(0,t.jsx)(a.default,{href:`/project/${s}/advisors/${C}`})})]}),(0,t.jsxs)(b.CardContent,{className:"!p-0 mt-0 flex-1 overflow-y-auto",children:[(0,t.jsx)(N.TabsContent_Shadcn_,{value:"security",className:"p-0 mt-0 h-full",children:q("Security",D,U,z,T)}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"performance",className:"p-0 mt-0 h-full",children:q("Performance",O,M,$,T)})]})]})}),(0,t.jsxs)(b.Card,{className:"h-80 flex flex-col",children:[(0,t.jsxs)(b.CardHeader,{className:"h-10 flex-row items-center justify-between py-0 pl-4 pr-2",children:[(0,t.jsx)(b.CardTitle,{children:"Slow Queries"}),(0,t.jsx)(m.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:"Open Query Performance Advisor"}},children:(0,t.jsx)(a.default,{href:`/project/${s}/reports/query-performance`})})]}),(0,t.jsx)(b.CardContent,{className:"!p-0 flex-1 overflow-y-auto",children:I?(0,t.jsxs)("div",{className:"space-y-2 p-4",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}):0===H.length?(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(l.Activity,{strokeWidth:1.5,size:20,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No slow queries found in the selected period"})]}):(0,t.jsxs)(y.Table,{className:"text-xs font-mono max-w-full",children:[(0,t.jsx)(y.TableHeader,{children:(0,t.jsxs)(y.TableRow,{children:[(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Query"}),(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Avg time"}),(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Calls"})]})}),(0,t.jsx)(y.TableBody,{children:H.map((e,s)=>(0,t.jsxs)(y.TableRow,{className:"py-2",children:[(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:e.query}),(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:"number"==typeof e.mean_time?`${(e.mean_time/1e3).toFixed(2)}s`:"N/A"}),(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:e.calls})]},s))})]})})]})]})]})};var k=e.i(346600),A=e.i(236610),T=e.i(707820),E=e.i(655605),I=e.i(513826),L=e.i(937942),R=e.i(368315),P=e.i(92332),D=e.i(912793);e.i(481541);var O=e.i(755191),U=e.i(114970),z=e.i(41941),M=e.i(171137),$=e.i(499536),H=e.i(71981),B=e.i(10429),F=e.i(837710),W=e.i(405374),Q=e.i(843778);let q=()=>(0,t.jsx)("div",{className:"w-[10%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded border border-control"})}),G=({className:e,col1:s,col2:a,col3:r})=>(0,t.jsxs)("div",{className:(0,Q.cn)("h-[30px] flex items-center bg-studio border-b border-default",e),children:[(0,t.jsx)(q,{}),(0,t.jsx)("div",{className:"w-[15%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:s})}),(0,t.jsx)("div",{className:"w-[45%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:a})}),(0,t.jsx)("div",{className:"w-[30%] h-full flex items-center px-2",children:(0,t.jsx)("p",{className:"text-xs",children:r})})]}),Y=()=>(0,t.jsxs)("div",{className:"w-full max-w-[500px] h-full pb-10 lg:pb-0 relative pointer-events-none",children:[(0,t.jsxs)("div",{className:(0,Q.cn)("w-[290px] lg:w-[400px] h-[180px] bg-alternative border border-default","rounded-t px-4 py-3 space-y-1 overflow-hidden"),children:[(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"1"}),(0,t.jsxs)("p",{className:"text-blue-900",children:["create table ",(0,t.jsxs)("span",{className:"text-foreground",children:["todos ","("]})]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"2"}),(0,t.jsxs)("p",{className:"text-foreground",children:["id ",(0,t.jsx)("span",{className:"text-blue-900",children:"bigint generated by default"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"3"}),(0,t.jsxs)("p",{className:"text-foreground",children:["task ",(0,t.jsx)("span",{className:"text-blue-900",children:"text"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"4"}),(0,t.jsxs)("p",{className:"text-foreground",children:["status ",(0,t.jsx)("span",{className:"text-blue-900",children:"status default 'Not Started'"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"5"}),(0,t.jsxs)("p",{className:"text-foreground",children:["user_id ",(0,t.jsx)("span",{className:"text-blue-900",children:"uuid references auth.users not null"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"6"}),(0,t.jsxs)("p",{className:"text-foreground",children:["inserted_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"7"}),(0,t.jsxs)("p",{className:"text-foreground",children:["updated_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"8"}),(0,t.jsx)("p",{className:"text-blue-900",children:");"})]})]}),(0,t.jsxs)("div",{className:(0,Q.cn)("w-[260px] lg:w-[320px] h-[160px] lg:h-[220px] bg-surface-100 border border-default","absolute right-0 top-[50px] lg:-top-[40px] rounded-t overflow-y-hidden"),children:[(0,t.jsx)(G,{col1:"id",col2:"task",col3:"status",className:"h-[24px] bg-surface-100"}),(0,t.jsx)(G,{col1:"1",col2:"Create a project",col3:"Complete"}),(0,t.jsx)(G,{col1:"2",col2:"Read documentation",col3:"Complete"}),(0,t.jsx)(G,{col1:"3",col2:"Build application",col3:"In progress"}),(0,t.jsx)(G,{col1:"4",col2:"Connect Supabase",col3:"In progress"}),(0,t.jsx)(G,{col1:"5",col2:"Deploy project",col3:"Not started"}),(0,t.jsx)(G,{col1:"6",col2:"Get users",col3:"Not started"}),(0,t.jsx)(G,{col1:"7",col2:"Upgrade to Pro",col3:"Not started"})]})]}),V=()=>{let{ref:e}=(0,i.useParams)(),{projectAuthAll:s,projectEdgeFunctionAll:r,projectStorageAll:l}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","project_storage:all"]);return(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-20",children:[(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-12 md:space-y-20",children:[(0,t.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Welcome to your new project"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Your project has been deployed on its own instance, with its own API all set up and ready to use."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-12 flex flex-col justify-center space-y-8 lg:col-span-7",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Build out your database"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Start building your app by creating tables and inserting data. Our Table Editor makes Postgres as easy to use as a spreadsheet, but there's also our SQL Editor if you need something more."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(H.TableEditor,{strokeWidth:1.5}),children:(0,t.jsx)(P.EditorIndexPageLink,{projectRef:e,children:"Table Editor"})}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(M.SqlEditor,{strokeWidth:1.5}),children:(0,t.jsx)(a.default,{href:`/project/${e}/sql/new`,children:"SQL Editor"})}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(n.ExternalLink,{}),children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/database`,target:"_blank",rel:"noreferrer",children:"About Database"})})]})]}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,t.jsx)(Y,{})})]}),s&&r&&l&&(0,t.jsxs)("div",{className:"flex h-full flex-col justify-between space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-2xl space-y-2",children:[(0,t.jsx)("h2",{children:"Explore our other products"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Supabase provides all the backend features you need to build a product. You can use it completely, or just the features you need."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:gap-y-0 xl:grid-cols-4",children:[(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Auth,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Authentication"})]}),(0,t.jsx)("div",{className:"flex flex-grow md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"A complete user management system that works without any additional tools."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/auth/users`,children:"Explore Auth"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/auth`,target:"_blank",rel:"noreferrer",children:"About Auth"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)($.Storage,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Storage"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Store, organize, and serve any file types of any size from multiple buckets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/storage/buckets`,children:"Explore Storage"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/storage`,target:"_blank",rel:"noreferrer",children:"About Storage"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(U.EdgeFunctions,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Edge Functions"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Write custom code without deploying or scaling servers, with fast deploy times and low latency."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/functions`,children:"Explore Functions"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/functions`,target:"_blank",rel:"noreferrer",children:"About Functions"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(z.Realtime,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Realtime"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Listen to your PostgreSQL database in realtime via websockets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/realtime/inspector`,children:"Explore Realtime"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/realtime`,target:"_blank",rel:"noreferrer",children:"About Realtime"})})]})]})})]})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Connect to your project"}),(0,t.jsxs)("p",{className:"text-base text-foreground-light text-balance",children:["Interact with your database through the"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/reference`,children:"Supabase client libraries"})," and your API keys."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(E.Settings,{size:16,strokeWidth:1.5}),children:(0,t.jsx)(a.default,{href:`/project/${e}/settings/api`,children:"API settings"})}),(0,t.jsx)(I.DocsButton,{href:`${B.DOCS_URL}/guides/database/api`})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,t.jsx)(W.APIKeys,{})})]})};var K=e.i(867637),J=e.i(655876),X=e.i(102703),Z=e.i(242882),ee=e.i(234745),et=e.i(510334);async function es({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,ee.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-requests-count",{params:{path:{ref:e}},signal:t});return a&&(0,ee.handleError)(a),s}async function ea({projectRef:e,interval:t},s){if(!e)throw Error("projectRef is required");if(!t)throw Error("interval is required");let{data:a,error:r}=await (0,ee.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-counts",{params:{path:{ref:e},query:{interval:t}},signal:s});return r&&(0,ee.handleError)(r),a}let er=({projectRef:e,interval:t},{enabled:s=!0,...a}={})=>(0,Z.useQuery)({queryKey:et.analyticsKeys.usageApiCounts(e,t),queryFn:({signal:s})=>ea({projectRef:e,interval:t},s),enabled:s&&void 0!==e&&void 0!==t,...a});var ei=e.i(635494),el=e.i(886554),en=e.i(629847),eo=e.i(158005),ec=e.i(520124),ed=e.i(25123),eu=e.i(265735),eh=e.i(733957),em=e.i(586030),ex=e.i(271226),ep=e.i(787902);let ef=()=>{let e=(0,ex.useRouter)(),{ref:a}=(0,i.useParams)(),{data:l}=(0,eu.useSelectedOrganizationQuery)(),{projectAuthAll:n,projectStorageAll:o}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:c}=(0,ed.useCurrentOrgPlan)(),d=c?.id==="free"?"1hr":"1day",[u,h]=(0,r.useState)(d),{data:m,isPending:x}=er({projectRef:a,interval:u}),p=eo.CHART_INTERVALS.find(e=>e.key===u)||eo.CHART_INTERVALS[1],f=(0,s.default)().subtract(p.startValue,p.startUnit),g=(0,s.default)(),{data:j}=(0,ec.useFillTimeseriesSorted)({data:m?.result??[],timestampKey:"timestamp",valueKey:["total_auth_requests","total_rest_requests","total_storage_requests","total_realtime_requests"],defaultValue:0,startDate:f.toISOString(),endDate:g.toISOString(),minPointsToFill:5}),b=p.format||"MMM D, ha",y=(t,r)=>{let i=p.startUnit,l=(0,s.default)(t?.timestamp),n=l.add(1,i);"rest"===r?e.push(`/project/${a}/logs/edge-logs?its=${l.toISOString()}&ite=${n.toISOString()}`):e.push(`/project/${a}/logs/edge-logs?its=${l.toISOString()}&ite=${n.toISOString()}&f=${JSON.stringify({product:{[r]:!0}})}`)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,t.jsx)(en.ChartIntervalDropdown,{value:u||"1day",onChange:e=>h(e),planId:c?.id,planName:c?.name,organizationSlug:l?.slug,dropdownAlign:"start",tooltipSide:"right"}),(0,t.jsxs)("span",{className:"text-xs text-foreground-light",children:["Statistics for ",p.label.toLowerCase()]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-4 @2xl:grid-cols-4",children:[(0,t.jsx)(R.default,{className:"mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(eg,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(eh.Database,{strokeWidth:1.5,size:16})}),title:"Database",href:`/project/${a}/editor`}),(0,t.jsx)(ep.Loading,{active:x,children:(0,t.jsx)(el.default,{title:"REST Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_rest_requests",onBarClick:e=>y(e,"rest"),customDateFormat:b,highlightedValue:(0,em.default)(j,"total_rest_requests")})})]})}),n&&(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(eg,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Auth,{strokeWidth:1.5,size:16})}),title:"Auth",href:`/project/${a}/auth/users`}),(0,t.jsx)(ep.Loading,{active:x,children:(0,t.jsx)(el.default,{title:"Auth Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_auth_requests",onBarClick:e=>y(e,"auth"),customDateFormat:b,highlightedValue:(0,em.default)(j||[],"total_auth_requests")})})]})}),o&&(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(eg,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)($.Storage,{strokeWidth:1.5,size:16})}),title:"Storage",href:`/project/${a}/storage/buckets`}),(0,t.jsx)(ep.Loading,{active:x,children:(0,t.jsx)(el.default,{title:"Storage Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_storage_requests",onBarClick:e=>y(e,"storage"),customDateFormat:b,highlightedValue:(0,em.default)(j,"total_storage_requests")})})]})}),(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(eg,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(z.Realtime,{strokeWidth:1.5,size:16})}),title:"Realtime"}),(0,t.jsx)(ep.Loading,{active:x,children:(0,t.jsx)(el.default,{title:"Realtime Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_realtime_requests",onBarClick:e=>y(e,"realtime"),customDateFormat:b,highlightedValue:(0,em.default)(j,"total_realtime_requests")})})]})})]})]})},eg=e=>{let s=e?.href?a.default:"div";return(0,t.jsx)(s,{href:e.href,children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 opacity-80 transition "+(e.href?"cursor-pointer hover:text-gray-1200 hover:opacity-100":""),children:[(0,t.jsx)("div",{children:e.icon}),(0,t.jsx)("span",{className:"flex items-center space-x-1",children:(0,t.jsx)("h4",{className:"mb-0 text-lg",children:e.title})})]})})},ej=()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{error:s,isPending:a}=(({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:et.analyticsKeys.usageApiRequestsCount(e),queryFn:({signal:t})=>es({projectRef:e},t),enabled:t&&void 0!==e,...s}))({projectRef:e?.ref}),{isPending:r}=er({projectRef:e?.ref,interval:"1hr"});return a||r?(0,t.jsx)(J.ProjectUsageLoadingState,{}):s?(0,t.jsx)(X.default,{hideCollapse:!0,defaultVisibility:!0,icon:(0,t.jsx)(K.AlertCircle,{size:18,strokeWidth:2}),title:"There was an issue loading the usage details of your project"}):(0,t.jsx)(ef,{})};var eb=e.i(217444),ey=e.i(624982),ev=e.i(416050),eN=e.i(774803),eS=e.i(109);async function e_(e){try{let t=await fetch("https://obuldanrptloktxcffvn.supabase.co/functions/v1/health-check",{method:"GET",signal:e});return await t.json()}catch(e){return{healthy:!1}}}let ew=({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:["projects",e,"service-status","edge-functions"],queryFn:({signal:e})=>e_(e),enabled:t&&void 0!==e,...s});async function eC({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,ee.get)("/v1/projects/{ref}/health",{params:{path:{ref:e},query:{services:["auth","realtime","rest","storage","db"]}},signal:t});return a&&(0,ee.handleError)(a),s}let ek=({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:["projects",e,"service-status"],queryFn:({signal:t})=>eC({projectRef:e},t),enabled:t&&void 0!==e,...s});var eA=e.i(877555),eT=e.i(793912),eE=e.i(135144),eI=e.i(689805);let eL=({status:e,isLoading:t,isProjectNew:s})=>t?"Checking status":"DISABLED"===e?"Disabled":"UNHEALTHY"===e?"Unhealthy":"COMING_UP"===e?"Coming up...":"ACTIVE_HEALTHY"===e?"Healthy":s?"Coming up...":e||"Unable to connect",eR={size:18,strokeWidth:1.5},eP=()=>(0,t.jsx)(eN.Loader2,{...eR,className:"animate-spin"}),eD=()=>(0,t.jsx)(eb.AlertTriangle,{...eR}),eO=()=>(0,t.jsx)(ey.CheckCircle2,{...eR,className:"text-brand"}),eU=({isLoading:e,isProjectNew:s,projectStatus:a})=>"ACTIVE_HEALTHY"===a?(0,t.jsx)(eO,{}):"DISABLED"===a?(0,t.jsx)(eD,{}):"COMING_UP"===a||e||s?(0,t.jsx)(eP,{}):(0,t.jsx)(eD,{}),ez=e=>{if(e?.info&&"db_schema"in e.info)return e.info.db_schema},eM=()=>{let{ref:e}=(0,i.useParams)(),{data:l}=(0,ei.useSelectedProjectQuery)(),[n,o]=(0,r.useState)(!1),{projectAuthAll:c,projectEdgeFunctionAll:d,realtimeAll:u,projectStorageAll:h}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),m=l?.parentRef!==l?.ref,{data:x,isPending:p}=(0,eS.useBranchesQuery)({projectRef:m?l?.parentRef:void 0},{enabled:m,refetchInterval:t=>{let s=t.state.data;if(!s)return!1;let a=s.find(t=>t.project_ref===e);return!["FUNCTIONS_DEPLOYED","MIGRATIONS_FAILED","FUNCTIONS_FAILED"].includes(a?.status||"")&&5e3}}),f=m?x?.find(t=>t.project_ref===e):void 0,{data:g,isPending:j,refetch:b}=ek({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==ez(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:y,refetch:v}=ew({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!t?.healthy&&5e3}}),N=g?.find(e=>"auth"===e.name),S=g?.find(e=>"rest"===e.name),_=g?.find(e=>"realtime"===e.name),w=g?.find(e=>"storage"===e.name),C=g?.find(e=>"db"===e.name),k=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:j,status:C?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:S?.error,docsUrl:void 0,isLoading:j,status:""===ez(S)?"DISABLED":S?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...c?[{name:"Auth",error:N?.error,docsUrl:void 0,isLoading:j,status:N?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...u?[{name:"Realtime",error:_?.error,docsUrl:void 0,isLoading:j,status:_?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...h?[{name:"Storage",error:w?.error,docsUrl:void 0,isLoading:j,status:w?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...d?[{name:"Edge Functions",error:void 0,docsUrl:`${B.DOCS_URL}/guides/functions/troubleshooting`,isLoading:j,status:y?.healthy?"ACTIVE_HEALTHY":j?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...m?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:p,status:f?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":f?.status==="FUNCTIONS_FAILED"||f?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP",logsUrl:"/branches"}]:[]],A=p||f?.status==="CREATING_PROJECT"||f?.status==="RUNNING_MIGRATIONS",T=k.some(e=>e.isLoading),E=k.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),I=5>s.default.utc().diff(s.default.utc(l?.inserted_at),"minute")||l?.status==="COMING_UP";return(0,r.useEffect)(()=>{let e;return I&&(e=setTimeout(()=>{b(),v()},1e3*(300-s.default.utc().diff(s.default.utc(l?.inserted_at),"seconds")))),()=>{clearTimeout(e)}},[I]),(0,t.jsxs)(eI.Popover_Shadcn_,{modal:!1,open:n,onOpenChange:o,children:[(0,t.jsx)(eE.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsxs)(F.Button,{type:"default",icon:T||!E&&I&&A?(0,t.jsx)(eP,{}):(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${E?"bg-brand":"bg-warning"}`}),children:[m?"Branch":"Project"," Status"]})}),(0,t.jsxs)(eT.PopoverContent_Shadcn_,{className:"p-0 w-56",side:"bottom",align:"center",children:[k.map(s=>(0,t.jsxs)(a.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(eU,{isLoading:s.isLoading,isProjectNew:I,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eL,{isLoading:s.isLoading,isProjectNew:I,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(ev.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!E&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eA.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[I?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})};var e$=e.i(800556),eH=e.i(297306),eB=e.i(711789),eF=e.i(975924),eW=e.i(902858),eQ=e.i(196621),eq=e.i(838055),eG=e.i(93472);let eY=()=>{let{ref:e}=(0,i.useParams)(),{data:a}=(0,eq.useProjectUpgradingStatusQuery)({projectRef:e},{enabled:B.IS_PLATFORM}),{status:l,initiated_at:n,latest_status_at:o,error:c}=a?.databaseUpgradeStatus??{},d=`supabase-upgrade-${e}-${n}`,[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h(localStorage?.getItem(d)==="true")},[d]);let m=l===eB.DatabaseUpgradeStatus.Failed,x=s.default.utc(n??0).tz(s.default.tz.guess()).format("DD MMM YYYY HH:mm:ss"),p=`Upgrade information:%0A• Initiated at: ${n}%0A• Error: ${c}`,f=encodeURIComponent(s.default.utc(n??0).format("YYYY-MM-DDTHH:mm:ss")),g=encodeURIComponent(s.default.utc(o??0).utcOffset(0).format("YYYY-MM-DDTHH:mm:ss")),j=`its=${f}&ite=${g}`;return!m||u?null:(0,t.jsx)("div",{className:"max-w-7xl",children:(0,t.jsxs)(eG.Alert,{withIcon:!0,variant:"warning",title:`Postgres version upgrade was not successful (Initiated at ${x})`,actions:(0,t.jsxs)("div",{className:"flex items-center h-full space-x-4",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",children:(0,t.jsx)(eQ.SupportLink,{queryParams:{category:eW.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:e,subject:"Upgrade%20failed%20for%20project",message:p},children:"Contact support"})}),(0,t.jsx)(F.Button,{type:"text",className:"px-1",icon:(0,t.jsx)(eF.X,{size:16,strokeWidth:1.5}),onClick:()=>void(h(!0),localStorage.setItem(d,"true"))})]}),children:[(0,t.jsx)("div",{children:"Your project and its data are not affected. Please reach out to us via our support form for assistance with the upgrade."}),(0,t.jsxs)("div",{children:["You may also view logs related to the failed upgrade in your"," ",(0,t.jsx)(L.InlineLink,{href:`/project/${e}/logs/pg-upgrade-logs?${j}`,children:"project's logs"}),"."]})]})})};var eV=e.i(240788),eK=e.i(164045),eJ=e.i(150671),eX=e.i(738196),eZ=e.i(276093),e0=e.i(837508),e1=e.i(876298),e2=e.i(587433),e4=e.i(613580);let e5=()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{data:l}=(0,eu.useSelectedOrganizationQuery)(),{data:n}=(0,eK.useProjectDetailQuery)({ref:e?.parent_project_ref}),o=(0,ei.useIsOrioleDb)(),c=(0,e1.useAppStateSnapshot)(),{ref:d,enableBranching:u}=(0,i.useParams)(),{projectHomepageExampleProjects:h,projectHomepageClientLibraries:m}=(0,eZ.useCustomContent)(["project_homepage:example_projects","project_homepage:client_libraries"]),{projectHomepageShowInstanceSize:x,projectHomepageShowExamples:p}=(0,D.useIsFeatureEnabled)(["project_homepage:show_instance_size","project_homepage:show_examples"]),f=(0,r.useRef)(!1),g=e?.status===e0.PROJECT_STATUS.INACTIVE,j=(0,s.default)(e?.inserted_at).isAfter((0,s.default)().subtract(2,"day"));(0,r.useEffect)(()=>{u&&!f.current&&(f.current=!0,c.setShowCreateBranchModal(!0))},[u]);let{data:b,isPending:y}=(0,eX.useTablesQuery)({projectRef:e?.ref,connectionString:e?.connectionString,schema:"public"}),{data:E,isPending:I}=(0,eV.useEdgeFunctionsQuery)({projectRef:e?.ref}),{data:R,isPending:P}=(0,eJ.useReadReplicasQuery)({projectRef:e?.ref}),{data:O}=(0,eS.useBranchesQuery)({projectRef:e?.parent_project_ref??e?.ref}),U=O?.find(e=>e.is_default),z=O?.find(t=>t.project_ref===e?.ref),M=z?.name===U?.name,$="Welcome to your project";z&&!M?$=z?.name:e?.name&&($=e?.name);let H=Math.max(0,b?.length??0),F=Math.max(0,E?.length??0),W=Math.max(0,(R?.length??1)-1);return g?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(e$.ProjectPausedState,{})}):(0,t.jsxs)("div",{className:"w-full px-4",children:[(0,t.jsx)("div",{className:(0,Q.cn)("py-16 ",!g&&"border-b border-muted "),children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6 justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-3 w-full",children:[(0,t.jsxs)("div",{children:[!M&&(0,t.jsx)(a.default,{href:`/project/${n?.ref}`,className:"text-sm text-foreground-light",children:n?.name}),(0,t.jsx)("h1",{className:"text-3xl",children:$})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2 mb-1",children:[o&&(0,t.jsxs)(e4.Tooltip,{children:[(0,t.jsx)(e4.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e2.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(e4.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),x&&(0,t.jsx)(eH.ComputeBadgeWrapper,{projectRef:e?.ref,slug:l?.slug,cloudProvider:e?.cloud_provider,computeSize:e?.infra_compute_size})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[e?.status===e0.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/editor`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Tables"}),y?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:H})]}),B.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/functions`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Functions"}),I?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:F})]}),B.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/settings/infrastructure`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Replicas"}),P?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:W})]})]}),B.IS_PLATFORM&&e?.status===e0.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsx)("div",{className:"ml-6 border-l flex items-center w-[145px] justify-end",children:(0,t.jsx)(eM,{})})]})]}),(0,t.jsx)(eY,{})]})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"py-16 border-b border-muted",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:[B.IS_PLATFORM&&e?.status!==e0.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(t.Fragment,{children:j?(0,t.jsx)(V,{}):(0,t.jsx)(ej,{})}),!j&&e?.status!==e0.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(C,{})]})}),(0,t.jsx)("div",{className:"bg-surface-100/5 py-16",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:e?.status!==e0.PROJECT_STATUS.INACTIVE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg",children:"Client libraries"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mb-12 md:grid-cols-3",children:m.map(e=>(0,t.jsx)(k.ClientLibrary,{...e},e.language))})]}),p&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,t.jsx)("h4",{className:"text-lg",children:"Example projects"}),h?(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:h.sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))}):(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(v.Tabs_Shadcn_,{defaultValue:"app",className:"w-full",children:[(0,t.jsxs)(S.TabsList_Shadcn_,{className:"flex gap-4 mb-8",children:[(0,t.jsx)(_.TabsTrigger_Shadcn_,{value:"app",children:"App Frameworks"}),(0,t.jsx)(_.TabsTrigger_Shadcn_,{value:"mobile",children:"Mobile Frameworks"})]}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"app",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:T.EXAMPLE_PROJECTS.filter(e=>"app"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))})}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"mobile",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:T.EXAMPLE_PROJECTS.filter(e=>"mobile"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))})})]})})]})]})})})]})]})};var e6=e.i(731394),e3=e.i(960547),e8=e.i(86086),e7=e.i(657588),e9=e.i(525882);let te=({id:e,children:s})=>{let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:n,isDragging:o}=(0,e3.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:n};return(0,t.jsxs)("div",{ref:i,style:c,className:"relative will-change-transform",children:[(0,t.jsx)("button",{"aria-label":"Drag to reorder section",className:"absolute -left-6 top-2 text-foreground-muted hover:text-foreground focus:outline-none cursor-grab active:cursor-grabbing",...a,...r,children:(0,t.jsx)(e9.GripVertical,{size:14})}),(0,t.jsx)("div",{className:(0,Q.cn)(o&&"opacity-70"),children:s})]})};var tt=e.i(264903),ts=e.i(421549),ta=e.i(667042),tr=e.i(300906),ti=e.i(162082);let tl=({icon:e,label:s,value:r,className:i,href:l,onClick:n,trackingProperties:o})=>{let{mutate:c}=(0,ti.useSendEventMutation)(),{data:d}=(0,ei.useSelectedProjectQuery)(),{data:u}=(0,eu.useSelectedOrganizationQuery)(),h=(0,t.jsxs)("div",{className:`group flex items-center gap-4 p-0 text-base justify-start ${i||""}`,children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-md bg-surface-75 group-hover:bg-muted border flex items-center justify-center",children:e}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-left heading-meta text-foreground-light",children:s}),(0,t.jsx)("div",{className:"text-foreground truncate h-[34px] flex items-center capitalize-sentence",children:r})]})]});return l?(0,t.jsx)(a.default,{className:"group block",href:l,onClick:()=>{o&&d?.ref&&u?.slug&&c({action:"home_activity_stat_clicked",properties:o,groups:{project:d.ref,organization:u.slug}})},children:h}):n?(0,t.jsx)("button",{className:"group",onClick:n,children:h}):h};var tn=e.i(685509),to=e.i(993720),tc=e.i(745457),td=e.i(903248),tu=e.i(955909);let th=()=>{let{ref:e}=(0,i.useParams)(),{data:r}=(0,ei.useSelectedProjectQuery)(),{projectAuthAll:l,projectEdgeFunctionAll:n,realtimeAll:o,projectStorageAll:c}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),d=r?.parentRef!==r?.ref,{data:u,isPending:h}=(0,eS.useBranchesQuery)({projectRef:d?r?.parentRef:void 0},{enabled:d}),m=d?u?.find(t=>t.project_ref===e):void 0,{data:x,isPending:p}=ek({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==ez(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:f}=ew({projectRef:e},{refetchInterval:e=>!e.state.data?.healthy&&5e3}),g=x?.find(e=>"auth"===e.name),j=x?.find(e=>"rest"===e.name),b=x?.find(e=>"realtime"===e.name),y=x?.find(e=>"storage"===e.name),v=x?.find(e=>"db"===e.name),N=r?.status==="COMING_UP"||d&&(h||m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"),S=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:p,status:v?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:j?.error,docsUrl:void 0,isLoading:p,status:""===ez(j)?"DISABLED":j?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...l?[{name:"Auth",error:g?.error,docsUrl:void 0,isLoading:p,status:g?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...o?[{name:"Realtime",error:b?.error,docsUrl:void 0,isLoading:p,status:b?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...c?[{name:"Storage",error:y?.error,docsUrl:void 0,isLoading:p,status:y?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...n?[{name:"Edge Functions",error:void 0,docsUrl:`${B.DOCS_URL}/guides/functions/troubleshooting`,isLoading:p,status:f?.healthy?"ACTIVE_HEALTHY":p?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...d?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:h,status:d?m?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":m?.status==="FUNCTIONS_FAILED"||m?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP":N?"COMING_UP":"ACTIVE_HEALTHY",logsUrl:d?"/branches":"/logs/database-logs"}]:[]],_=S.some(e=>e.isLoading),w=S.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),C=5>s.default.utc().diff(s.default.utc(r?.inserted_at),"minute")||r?.status==="COMING_UP"||d&&(m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"||N),k=S.some(e=>"UNHEALTHY"===e.status),A=S.some(e=>"COMING_UP"===e.status),T=r?.status==="COMING_UP";return(0,t.jsxs)(eI.Popover_Shadcn_,{children:[(0,t.jsx)(eE.PopoverTrigger_Shadcn_,{children:(0,t.jsx)(tl,{icon:T?(0,t.jsx)(eN.Loader2,{className:"animate-spin",size:18}):(0,t.jsx)("div",{className:"grid grid-cols-3 gap-1",children:S.map((e,s)=>(0,t.jsx)("div",{className:(0,Q.cn)("w-1.5 h-1.5 rounded-full",e.isLoading||"COMING_UP"===e.status||C&&"ACTIVE_HEALTHY"!==e.status?"bg-foreground-lighter animate-pulse":"ACTIVE_HEALTHY"===e.status?"bg-brand":"bg-selection")},`${e.name}-${s}`))}),label:(0,t.jsx)("span",{children:"Status"}),value:(0,t.jsx)("span",{children:_?"Checking...":A?"Coming up...":k?"Unhealthy":"Healthy"})})}),(0,t.jsxs)(eT.PopoverContent_Shadcn_,{className:"p-0 w-60",side:"bottom",align:"start",children:[S.map(s=>(0,t.jsxs)(a.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(eU,{isLoading:s.isLoading,isProjectNew:C,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eL,{isLoading:s.isLoading,isProjectNew:C,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(ev.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!w&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eA.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[C?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})},tm=()=>{let{ref:e}=(0,i.useParams)(),{data:a}=(0,ei.useSelectedProjectQuery)(),{data:l,isPending:n}=(0,eS.useBranchesQuery)({projectRef:a?.parent_project_ref??a?.ref}),o=a?.parent_project_ref===void 0,c=(0,r.useMemo)(()=>(l??[]).find(t=>t.project_ref===e),[l,e]),d=(0,r.useMemo)(()=>{let e=(l??[]).filter(e=>!e.is_default);if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.created_at??t.updated_at).valueOf()-new Date(e.created_at??e.updated_at).valueOf())[0]},[l]),{data:u,isPending:h}=(0,to.useMigrationsQuery)({projectRef:a?.ref,connectionString:a?.connectionString}),m=(0,r.useMemo)(()=>(u??[])[0],[u]),{data:x,isPending:p}=(0,tn.useBackupsQuery)({projectRef:a?.ref}),f=(0,r.useMemo)(()=>{let e=x?.backups??[];if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf())[0]},[x]),[g,j]=(0,r.useMemo)(()=>{let e=m?.version,t=(0,tc.parseMigrationVersion)(e);return t?[t.fromNow(),t.toISOString()]:[void 0,void 0]},[m]),b=g&&j,y=u&&u.length>0?"Unknown":"No migrations";return(0,t.jsx)("div",{className:"@container",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-2 @md:gap-6 flex-wrap",children:[(0,t.jsx)(th,{}),(0,t.jsx)(tl,{href:`/project/${e}/database/migrations`,icon:(0,t.jsx)(ta.Database,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last migration"}),trackingProperties:{stat_type:"migrations",stat_value:u?.length??0},value:h?(0,t.jsx)(td.Skeleton,{className:"h-6 w-24"}):b?(0,t.jsx)(tu.TimestampInfo,{className:"text-base",label:g,utcTimestamp:j}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:y})}),(0,t.jsx)(tl,{href:`/project/${e}/database/backups/scheduled`,icon:(0,t.jsx)(ts.Archive,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last backup"}),trackingProperties:{stat_type:"backups",stat_value:x?.backups?.length??0},value:p?(0,t.jsx)(td.Skeleton,{className:"h-6 w-24"}):x?.pitr_enabled?(0,t.jsx)("p",{children:"PITR enabled"}):f?(0,t.jsx)(tu.TimestampInfo,{className:"text-base",displayAs:"utc",label:(0,s.default)(f.inserted_at).fromNow(),utcTimestamp:f.inserted_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"No backups"})}),(0,t.jsx)(tl,{href:`/project/${e}/branches`,icon:(0,t.jsx)(tr.GitBranch,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:o?"Recent branch":"Branch Created"}),trackingProperties:{stat_type:"branches",stat_value:l?.length??0},value:n?(0,t.jsx)(td.Skeleton,{className:"h-6 w-24"}):o?(0,t.jsx)("p",{className:(0,Q.cn)("truncate",!d&&"text-foreground-lighter truncate"),children:d?.name??"No branches"}):c?.created_at?(0,t.jsx)(tu.TimestampInfo,{className:"text-base",label:(0,s.default)(c.created_at).fromNow(),utcTimestamp:c.created_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Unknown"})})]})})};var tx=e.i(554056);let tp=()=>{let e=(0,ei.useIsOrioleDb)(),{data:s}=(0,ei.useSelectedProjectQuery)(),{data:r}=(0,eu.useSelectedOrganizationQuery)(),{data:i}=(0,eK.useProjectDetailQuery)({ref:s?.parent_project_ref}),{data:l}=(0,eS.useBranchesQuery)({projectRef:s?.parent_project_ref??s?.ref}),n=l?.find(e=>e.is_default),o=l?.find(e=>e.project_ref===s?.ref),c=o?.name===n?.name,d=s?.status===e0.PROJECT_STATUS.INACTIVE,u=o&&!c?o.name:s?.name?s.name:"Welcome to your project";return d?(0,t.jsx)(e$.ProjectPausedState,{}):(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 py-0 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 w-full",children:[(0,t.jsxs)("div",{children:[!c&&(0,t.jsx)(a.default,{href:`/project/${i?.ref}`,className:"text-sm text-foreground-light",children:i?.name}),(0,t.jsx)("h1",{className:"text-3xl",children:u})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[e&&(0,t.jsxs)(e4.Tooltip,{children:[(0,t.jsx)(e4.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e2.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(e4.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),(0,t.jsx)(eH.ComputeBadgeWrapper,{projectRef:s?.ref,slug:r?.slug,cloudProvider:s?.cloud_provider,computeSize:s?.infra_compute_size})]})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(tm,{})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,Q.cn)("w-full h-[400px] md:h-[500px] border border-muted rounded-md overflow-hidden flex flex-col relative"),children:(0,t.jsx)(tt.ReactFlowProvider,{children:(0,t.jsx)(tx.InstanceConfiguration,{diagramOnly:!0})})})})]}),(0,t.jsx)(eY,{})]})};var tf=e.i(167892),tg=e.i(124416),tj=e.i(78023),tb=e.i(967052),ty=e.i(954676);let tv=(0,r.forwardRef)(function({columns:e,children:s,className:a,gap:i=16,showArrows:l=!0,scrollBehavior:n="smooth",...o},c){let d=(0,r.useRef)(null),u=(0,r.useMemo)(()=>Array.isArray(s)?s:[s],[s]),[h,m]=(0,r.useState)(0),x=(e=>{let[t,s]=(0,r.useState)(null);return(0,r.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let a=t.getBoundingClientRect().width;if(s(e=>e===a?e:a),"undefined"!=typeof ResizeObserver){let e=0,a=new ResizeObserver(t=>{let a=t[0]?.contentRect.width??0;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{s(e=>e===a?e:a)})});return a.observe(t),()=>{e&&cancelAnimationFrame(e),a.disconnect()}}{let e=()=>{let e=t.getBoundingClientRect().width;s(t=>t===e?t:e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[e]),t})(d),p=(0,r.useMemo)(()=>(t=>{if(!Array.isArray(e))return e;let[s,a,r]=e;return t>=1024?s:t>=768?a:r})(x??0),[x,e]),f=e=>{let t=d.current;if(!t)return;let s=((x??t.getBoundingClientRect().width)-(p-1)*i)/p+i;m(t=>{let a=Math.max(0,Math.min(b,t+e*s));return a===t?t:a})},g=()=>f(-1),j=()=>f(1),b=(0,r.useMemo)(()=>{if(null==x)return -1;let e=(x-(p-1)*i)/p;return Math.max(0,u.length*e+(u.length-1)*i-x)},[x,p,u.length,i]),y=h>0,v=h<b,N=u.length>p,S=(0,r.useRef)(0),_=(0,r.useRef)(0);return(0,r.useEffect)(()=>{m(e=>{let t=Math.min(e,b);return t===e?e:t})},[b]),(0,t.jsxs)("div",{ref:c,className:(0,Q.cn)("relative w-full",a),...o,children:[l&&y&&(0,t.jsx)(F.Button,{type:"default",onClick:g,className:"absolute w-8 h-8 left-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll left",children:(0,t.jsx)(ty.ChevronLeft,{className:"w-4 h-4"})}),l&&v&&N&&(0,t.jsx)(F.Button,{type:"default",onClick:j,className:"absolute w-8 h-8 right-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll right",children:(0,t.jsx)(ev.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("div",{ref:d,className:"w-full overflow-visible focus:outline-none",tabIndex:0,role:"region","aria-roledescription":"carousel","aria-label":"Horizontally scrollable content",style:{overscrollBehaviorX:"contain"},onWheel:e=>{if(0===e.deltaX)return;let t=2*Math.abs(e.deltaX)*(e.deltaX>0?1:-1);_.current+=t,S.current||(S.current=requestAnimationFrame(()=>{S.current=0;let e=_.current;_.current=0,m(t=>{let s=Math.max(0,Math.min(b,t+e));return s===t?t:s})}))},onKeyDown:e=>{"ArrowLeft"===e.key&&y?(e.preventDefault(),g()):"ArrowRight"===e.key&&v&&(e.preventDefault(),j())},children:(0,t.jsx)("div",{className:"flex items-stretch min-w-full transition-transform duration-300 ease-out",style:{gap:`${i}px`,"--column-width":`calc((100% - ${(p-1)*i}px) / ${p})`,transform:`translateX(-${h}px)`,willChange:"transform"},children:u.map((e,s)=>(0,t.jsx)("div",{className:"flex-shrink-0",style:{width:"var(--column-width)"},children:e},s))})})]})});tv.displayName="Row";var tN=e.i(592383);let tS=({showEmptyState:e=!1})=>{let{ref:s}=(0,i.useParams)(),{data:a,isPending:l}=(0,x.useProjectLintsQuery)({projectRef:s},{enabled:!e}),n=(0,tb.useTrack)(),u=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:y}=(0,g.useSidebarManagerSnapshot)(),{setSelectedItem:v}=(0,p.useAdvisorStateSnapshot)(),N=(0,r.useMemo)(()=>a?.filter(e=>e.level===c.LINTER_LEVELS.ERROR)??[],[a]),S=N.length,_=(0,r.useMemo)(()=>{if(0===S)return(0,t.jsx)("h2",{children:"Advisor found no issues"});let e=1===S?"issue":"issues",s=S.toString();return(0,t.jsxs)("h2",{children:["Advisor found ",s," ",e]})},[S]),C=(0,r.useCallback)(()=>{y(h.SIDEBAR_KEYS.AI_ASSISTANT),n("advisor_assistant_button_clicked",{origin:"homepage",issuesCount:S})},[n,y,S]),k=(0,r.useCallback)(e=>{v(e.cache_key,"lint"),y(h.SIDEBAR_KEYS.ADVISOR_PANEL),n("advisor_detail_opened",{origin:"homepage",advisorSource:"lint",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},[n,v,y]);return e?(0,t.jsx)(t_,{}):(0,t.jsxs)("div",{children:[l?(0,t.jsx)(w.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[_,(0,t.jsx)(F.Button,{type:"default",icon:(0,t.jsx)(j.AiIconAnimation,{}),onClick:C,children:"Ask Assistant"})]}),l?(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}):N.length>0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(tv,{columns:[3,2,1],children:N.map(e=>(0,t.jsxs)(b.Card,{className:"min-h-full flex flex-col items-stretch cursor-pointer h-64",onClick:()=>{k(e)},children:[(0,t.jsxs)(b.CardHeader,{className:"border-b-0 shrink-0 flex flex-row gap-2 space-y-0 justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["SECURITY"===e.categories[0]?(0,t.jsx)(o.Shield,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}):(0,t.jsx)(tj.BarChart,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)(b.CardTitle,{className:"text-foreground-light",children:e.categories[0]})]}),(0,t.jsx)(m.ButtonTooltip,{type:"text",className:"w-7 h-7",icon:(0,t.jsx)(j.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),y(h.SIDEBAR_KEYS.AI_ASSISTANT),u.newChat({name:"Summarize lint",initialInput:(0,d.createLintSummaryPrompt)(e)}),n("advisor_assistant_button_clicked",{origin:"homepage",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]}),(0,t.jsxs)(b.CardContent,{className:"p-6 pt-16 flex flex-col justify-end flex-1 overflow-auto",children:[(0,t.jsx)("h3",{className:"mb-1",children:e.title}),(0,t.jsx)(tN.Markdown,{className:"leading-6 text-sm text-foreground-light",children:e.detail&&e.detail.replace(/\\`/g,"`")})]})]},e.cache_key))})}):(0,t.jsx)(t_,{})]})};function t_(){return(0,t.jsx)(b.Card,{className:"bg-transparent h-64",children:(0,t.jsxs)(b.CardContent,{className:"flex flex-col items-center justify-center gap-2 p-16 h-full",children:[(0,t.jsx)(o.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"No security or performance errors found"})]})})}var tw=e.i(479232),tC=e.i(61187),tk=e.i(355901),tA=e.i(202584),tT=e.i(201844),tE=e.i(669653),tI=e.i(364850),tL=e.i(866205),tR=e.i(917007),tP=e.i(920432),tD=e.i(549815),tO=e.i(911509),tU=e.i(874311),tz=e.i(396831);let tM=({projectRef:e,trigger:s,side:i="bottom",align:l="end",className:n,autoFocus:o=!1,onSelect:c})=>{let d=(0,ex.useRouter)(),u=(0,r.useRef)(null),[h,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(""),f=(0,tA.useDebounce)(x,500),{data:g,isPending:j,hasNextPage:b,fetchNextPage:y,isFetchingNextPage:v}=(0,tE.useContentInfiniteQuery)({projectRef:e,type:"sql",limit:tI.SNIPPET_PAGE_LIMIT,name:0===x.length?x:f},{placeholderData:tT.keepPreviousData}),N=(0,r.useMemo)(()=>g?.pages.flatMap(e=>e.content)??[],[g?.pages]),[S,_]=(0,tA.useIntersectionObserver)({root:u.current,threshold:0,rootMargin:"0px"});return(0,r.useEffect)(()=>{_?.isIntersecting&&b&&!v&&!j&&y()},[_?.isIntersecting,b,v,j,y]),(0,t.jsxs)(tU.DropdownMenu,{open:h,onOpenChange:m,children:[(0,t.jsx)(tU.DropdownMenuTrigger,{asChild:!0,children:s}),(0,t.jsx)(tU.DropdownMenuContent,{side:i,align:l,className:["w-80 p-0",n].filter(Boolean).join(" "),children:(0,t.jsxs)(tL.Command_Shadcn_,{shouldFilter:!1,children:[(0,t.jsx)(tP.CommandInput_Shadcn_,{showResetIcon:!0,autoFocus:o,placeholder:"Search snippets...",value:x,onValueChange:p,handleReset:()=>p("")}),(0,t.jsxs)(tO.CommandList_Shadcn_,{ref:u,children:[j?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"Loading..."}):x.length>0&&0===N.length?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"No snippets found"}):(0,t.jsx)(tR.CommandGroup_Shadcn_,{children:(0,t.jsxs)(tz.ScrollArea,{className:N.length>7?"h-[210px]":"",children:[N.map(e=>(0,t.jsx)(tD.CommandItem_Shadcn_,{value:e.id,onSelect:()=>c({id:e.id,name:e.name}),children:e.name},e.id)),(0,t.jsx)("div",{ref:S,className:"h-1 -mt-1"}),b&&(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(w.ShimmeringLoader,{className:"py-2"})})]})}),(0,t.jsx)("div",{className:"h-px bg-border-overlay -mx-1"}),(0,t.jsx)(tR.CommandGroup_Shadcn_,{children:(0,t.jsx)(tD.CommandItem_Shadcn_,{className:"cursor-pointer w-full",onSelect:()=>{m(!1),d.push(`/project/${e}/sql/new`)},onClick:()=>m(!1),children:(0,t.jsxs)(a.default,{href:`/project/${e}/sql/new`,onClick:()=>{m(!1)},className:"w-full flex items-center gap-2",children:[(0,t.jsx)(tw.Plus,{size:14,strokeWidth:1.5}),(0,t.jsx)("p",{children:"Create a report block with SQL"})]})})})]})]})})]})};var t$=e.i(238411),tH=e.i(888738),tB=e.i(344616),tF=e.i(356003),tW=e.i(420985),tQ=e.i(2579),tq=e.i(48189),tG=e.i(432478),tY=e.i(189329);function tV(){let e,a=(0,s.default)().subtract(7,"day").toISOString(),l=(0,s.default)().toISOString(),{ref:n}=(0,i.useParams)(),{profile:o}=(0,tG.useProfile)(),c=(0,tY.useDatabaseSelectorStateSnapshot)(),{data:d}=(0,eu.useSelectedOrganizationQuery)(),{mutate:u}=(0,ti.useSendEventMutation)(),{invalidateInfraMonitoringQuery:h}=(e=(0,tF.useQueryClient)(),{invalidateInfraMonitoringQuery:(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})=>{e.invalidateQueries({queryKey:et.analyticsKeys.infraMonitoring(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})})}}),{data:x}=(0,ei.useSelectedProjectQuery)(),[p,f]=(0,r.useState)(!1),{data:g}=(0,tE.useContentInfiniteQuery)({projectRef:n,type:"report",name:"Home",limit:1},{placeholderData:tT.keepPreviousData}),j=g?.pages?.[0]?.content?.[0],b=j?.content,[y,v]=(0,r.useState)(b),[N,S]=(0,r.useState)(!1),{can:_}=(0,tQ.useAsyncCheckPermissions)(eW.PermissionAction.CREATE,"user_content",{resource:{type:"report",owner_id:o?.id},subject:{id:o?.id}}),{can:w}=(0,tQ.useAsyncCheckPermissions)(eW.PermissionAction.UPDATE,"user_content",{resource:{type:"report",visibility:j?.visibility,owner_id:j?.owner_id},subject:{id:o?.id}}),{mutate:C}=(0,tW.useContentUpsertMutation)(),k=(0,r.useCallback)(e=>{n&&j&&C({projectRef:n,payload:{...j,content:e}})},[j,n,C]),A=(0,e6.useSensors)((0,e6.useSensor)(e6.PointerSensor,{activationConstraint:{distance:8}})),T=(0,r.useCallback)(e=>e.map((e,t)=>({...e,x:t%2,y:Math.floor(t/2),w:1,h:1})),[]),E=(0,r.useCallback)(e=>{let{active:t,over:s}=e;if(!y||!t||!s||t.id===s.id)return;let a=y.layout.map(e=>String(e.id)),r=a.indexOf(String(t.id)),i=a.indexOf(String(s.id));if(-1===r||-1===i)return;let l=T((0,e3.arrayMove)(y.layout,r,i)),n={...y,layout:l};v(n),k(n)},[y,k,T]),I=(0,r.useCallback)(e=>{let t=new Set(e.map(e=>`${e.y}-${e.x}`)),s=0;for(;;s++){let e=t.has(`${s}-0`),a=t.has(`${s}-1`);if(!e||!a)return{x:+!!e,y:s}}},[]),L=(0,r.useCallback)((e,t)=>({x:t.x,y:t.y,w:1,h:1,id:e.id,label:e.name,attribute:`snippet_${e.id}`,provider:"daily-stats",chart_type:"bar",chartConfig:tB.DEFAULT_CHART_CONFIG}),[]),R=(0,r.useCallback)(e=>{if(y?.layout?.some(t=>String(t.id)===String(e.id)||String(t.attribute)===`snippet_${e.id}`))return void(0,tk.toast)("This block is already in your report");if(!y||!j){if(!n||!o)return;let t={schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[L(e,{x:0,y:0})]};v(t),C({projectRef:n,payload:{id:(0,tq.uuidv4)(),type:"report",name:"Home",description:"",visibility:"project",owner_id:o.id,content:t}}),n&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:0},groups:{project:n,organization:d.slug}});return}let t=[...y.layout],{x:s,y:a}=I(t);t.push(L(e,{x:s,y:a}));let r={...y,layout:t};v(r),k(r),n&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:t.length-1},groups:{project:n,organization:d.slug}})},[y,j,n,o,C,d,u,I,L,k]),P=({metric:e})=>{if(!y)return;let t=y.layout.find(t=>t.attribute===e.key),s=y.layout.filter(t=>t.attribute!==e.key),a={...y,layout:s};v(a),k(a),n&&d?.slug&&t&&u({action:"home_custom_report_block_removed",properties:{block_id:String(t.id)},groups:{project:n,organization:d.slug}})},D=(0,r.useCallback)(async e=>{if(e.preventDefault(),S(!1),!n||!o||!x)return;let t=e.dataTransfer.getData("application/json");if(!t)return;let{label:s,sql:a}=JSON.parse(t);if(!s||!a)return;let r=tk.toast.loading(`Creating new query: ${s}`),i=(0,tH.createSqlSnippetSkeletonV2)({name:s,sql:a,owner_id:o.id,project_id:x.id});C({projectRef:n,payload:i}),tk.toast.success(`Successfully created new query: ${s}`,{id:r}),R({id:i.id,name:s}),u({action:"custom_report_assistant_sql_block_added",groups:{project:n,organization:d?.slug??"Unknown"}})},[n,o,x,C,R,u,d]),O=e=>{S(!0),e.preventDefault()},U=()=>{S(!1)},z=(0,r.useMemo)(()=>y?.layout??[],[y]);return(0,r.useEffect)(()=>{b&&v(b)},[b]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Reports"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[z.length>0&&(0,t.jsx)(m.ButtonTooltip,{type:"default",icon:(0,t.jsx)(tC.RefreshCw,{className:p?"animate-spin":""}),className:"w-7",disabled:p,tooltip:{content:{side:"bottom",text:"Refresh report"}},onClick:()=>{if(!n)return;f(!0);let e=y?.layout.filter(e=>"infra-monitoring"===e.provider||"daily-stats"===e.provider);e?.forEach(e=>{h(n,{attribute:e.attribute,startDate:a,endDate:l,interval:y?.interval||"1d",databaseIdentifier:c.selectedDatabaseId})}),setTimeout(()=>f(!1),1e3)}}),w||_?(0,t.jsx)(tM,{projectRef:n,onSelect:R,trigger:(0,t.jsx)(F.Button,{type:"default",icon:(0,t.jsx)(tw.Plus,{}),children:"Add block"}),side:"bottom",align:"end",autoFocus:!0}):null]})]}),(0,t.jsxs)("div",{className:"relative",children:[N&&(0,t.jsx)("div",{className:"absolute inset-0 rounded bg-brand/10 pointer-events-none z-10"}),0===z.length?(0,t.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center rounded border-2 border-dashed p-16 transition-colors",onDrop:D,onDragOver:O,onDragLeave:U,children:[(0,t.jsx)("h4",{children:"Build a custom report"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light mb-4",children:"Keep track of your most important metrics"}),w||_?(0,t.jsx)(tM,{projectRef:n,onSelect:R,trigger:(0,t.jsx)(F.Button,{type:"default",iconRight:(0,t.jsx)(tw.Plus,{size:14}),children:"Add your first block"}),side:"bottom",align:"center",autoFocus:!0}):(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No charts set up yet in report"})]}):(0,t.jsx)(e6.DndContext,{sensors:A,collisionDetection:e6.closestCenter,onDragStart:()=>{},onDragEnd:E,children:(0,t.jsx)(e3.SortableContext,{items:(y?.layout??[]).map(e=>String(e.id)),strategy:e3.rectSortingStrategy,children:(0,t.jsx)(tv,{columns:[3,2,1],onDrop:D,onDragOver:O,onDragLeave:U,children:z.map(e=>(0,t.jsx)(tK,{id:String(e.id),children:(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(t$.ReportBlock,{item:e,startDate:a,endDate:l,interval:y?.interval??"1d",disableUpdate:!1,isRefreshing:p,onRemoveChart:P,onUpdateChart:t=>((e,{chart:t,chartConfig:s})=>{if(!y)return;let a=y.layout.find(t=>t.id===e);if(!a)return;let r={...a,...t??{}};s&&(r.chartConfig={...a.chartConfig??{},...s});let i=y.layout.map(t=>t.id===e?r:t),l={...y,layout:i};v(l),k(l)})(e.id,t)},e.id)})},e.id))})})})]})]})}function tK({id:e,children:s}){let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:n,isDragging:o}=(0,e3.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:n};return(0,t.jsx)("div",{ref:i,style:c,className:o?"opacity-70 will-change-transform":"will-change-transform",...a,...r??{},children:s})}var tJ=e.i(454370),tX=e.i(219195),tZ=e.i(736025),t0=e.i(666555),t1=e.i(882087),t2=e.i(881685),t4=e.i(370410),t5=e.i(88816),t6=e.i(703526);let t3=({value:e,onChange:s,items:a,className:i})=>{let[l,n]=(0,r.useState)(!1),o=a.find(t=>t.key===e);return(0,t.jsxs)(eI.Popover_Shadcn_,{open:l,onOpenChange:n,modal:!1,children:[(0,t.jsx)("div",{className:(0,Q.cn)("flex",i),children:(0,t.jsx)(eE.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(F.Button,{size:"tiny",type:"default",className:"gap-0",iconRight:(0,t.jsx)(t5.ChevronDown,{strokeWidth:1.5}),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[o?.icon?(0,t.jsx)(t1.ConnectionIcon,{icon:o.icon}):(0,t.jsx)(t2.Box,{size:12}),o?.label]})})})}),(0,t.jsx)(eT.PopoverContent_Shadcn_,{className:"p-0 max-w-48",side:"bottom",align:"start",onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsxs)(tL.Command_Shadcn_,{children:[(0,t.jsx)(tP.CommandInput_Shadcn_,{placeholder:"Search..."}),(0,t.jsxs)(tO.CommandList_Shadcn_,{children:[(0,t.jsx)(t6.CommandEmpty_Shadcn_,{children:"No results found."}),(0,t.jsx)(tR.CommandGroup_Shadcn_,{children:a.map(a=>(0,t.jsxs)(tD.CommandItem_Shadcn_,{value:a.key,onSelect:()=>{s(a.key),n(!1)},className:"flex gap-2 items-center",children:[a.icon?(0,t.jsx)(t1.ConnectionIcon,{icon:a.icon}):(0,t.jsx)(t2.Box,{size:12}),a.label,(0,t.jsx)(t4.Check,{size:15,className:(0,Q.cn)("ml-auto",a.key===e?"opacity-100":"opacity-0")})]},a.key))})]})]})})]})};var t8=e.i(994110),t7=e.i(795019);function t9({steps:e,onStepClick:s}){let i=e.length>0&&e.every(e=>"complete"===e.status),[l,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(0===e.length)return void n(null);if(!(l&&e.some(e=>e.key===l)))if(i)n(null);else{let t=e.find(e=>"complete"!==e.status);n(t?.key??e[0]?.key??null)}},[e,i,l]);let o=l?e.find(e=>e.key===l):null,c=o?e.findIndex(e=>e.key===o.key):-1,d=c>0?e[c-1]:null,u=c>-1&&c<e.length-1?e[c+1]:null,h=i&&!o;return(0,t.jsx)(b.Card,{className:"overflow-hidden @container",children:(0,t.jsxs)("div",{className:"flex flex-col @2xl:flex-row",children:[(0,t.jsx)("aside",{className:"hidden border-r @2xl:block @2xl:w-[calc(1/3*100%-16px)]",children:(0,t.jsx)("ol",{children:e.map((e,s)=>{let a=!!o&&e.key===o.key,r="complete"===e.status;return(0,t.jsx)("li",{className:"border-b last:border-b-0 truncate",children:(0,t.jsx)(F.Button,{type:"text",onClick:()=>n(e.key),className:(0,Q.cn)("pl-1 block justify-start w-full rounded-none h-auto text-left text-foreground-light",a&&"bg-muted text-foreground"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm w-full",children:[(0,t.jsx)("span",{className:(0,Q.cn)("text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md"),children:r?(0,t.jsx)(t4.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"}):s+1}),(0,t.jsx)("span",{className:(0,Q.cn)("flex-1 block truncate",a?"text-foreground":"group-hover:text-foreground",r&&"line-through"),children:e.title}),(0,t.jsx)(ev.ChevronRight,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"})]})})},e.key)})})}),(0,t.jsx)(b.CardContent,{className:"flex flex-1 flex-col gap-0 p-0 overflow-y-auto border-b-0",children:h?(0,t.jsx)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden bg-200 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"p-10",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-md bg-brand/15 flex items-center justify-center shrink-0 mb-4",children:(0,t.jsx)(t4.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"})}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-4 mb-1",children:(0,t.jsx)("h3",{children:"All steps complete"})}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:"Drop into our Discord community to share your progress and learn from fellow developers."}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(t7.IconDiscord,{size:14}),className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(a.default,{href:"https://discord.supabase.com/",target:"_blank",children:"Join our Discord"})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b px-2 py-2 @2xl:hidden",children:[(0,t.jsx)("span",{className:"text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md",children:c+1}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.Button,{type:"outline",onClick:()=>{d&&n(d.key)},disabled:!d,className:"gap-2","aria-label":"Previous step",children:(0,t.jsx)(ty.ChevronLeft,{size:16,strokeWidth:1.5})}),(0,t.jsx)(F.Button,{type:"outline",onClick:()=>{u&&n(u.key)},disabled:!u,className:"gap-2","aria-label":"Next step",children:(0,t.jsx)(ev.ChevronRight,{size:16,strokeWidth:1.5})})]})]}),(0,t.jsxs)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden",children:[o?.image?(0,t.jsx)(t8.default,{className:"w-full select-none invert dark:invert-0",src:o.image,fill:!0,objectFit:"cover",objectPosition:"top",alt:o.title}):(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 overflow-hidden",children:[(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block user-select-none"}),(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden user-select-none"})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-background-surface-100 to-transparent"})]}),(0,t.jsx)("div",{className:"p-10",children:o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4 mb-1",children:[(0,t.jsx)("h3",{children:o.title}),(0,t.jsx)(e2.Badge,{variant:"complete"===o.status?"success":"default",className:"capitalize hidden @2xl:inline-flex",children:o.status})]}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:o.description}),(0,t.jsx)("div",{className:"mt-auto flex flex-wrap gap-2 pt-2",children:o.actions.map((e,r)=>{if(e.component)return(0,t.jsx)("div",{children:e.component},`${o.key}-action-${r}`);let i=e.label?.toLowerCase().includes("do it for me")||e.label?.toLowerCase().includes("generate")||e.label?.toLowerCase().includes("create policies for me")?"ai_assist":e.href&&!e.href.startsWith("/project/")?"external_link":"primary";return e.href?(0,t.jsx)(F.Button,{asChild:!0,type:e.variant??"default",icon:e.icon,className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(a.default,{href:e.href,onClick:()=>{s({stepIndex:c,stepTitle:o.title,actionType:i,wasCompleted:"complete"===o.status})},children:e.label})},`${o.key}-action-${r}`):(0,t.jsx)(F.Button,{type:e.variant??"default",icon:e.icon,onClick:()=>{e.onClick?.(),s({stepIndex:c,stepTitle:o.title,actionType:i,wasCompleted:"complete"===o.status})},className:"text-foreground-light hover:text-foreground",children:e.label},`${o.key}-action-${r}`)})})]})})]})})]})})}let se=(0,e.i(388019).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var st=e.i(495486),ss=e.i(194213),sa=e.i(432639),sr=e.i(672044);let si=tZ.FRAMEWORKS[0]?.key??"nextjs";var sl=e.i(14703),sn=e.i(360608),so=e.i(302372),sc=e.i(148210);function sd({value:e,onChange:s}){let a=(0,ex.useRouter)(),{ref:l}=(0,i.useParams)(),{data:n}=(0,ei.useSelectedProjectQuery)(),{data:c}=(0,eu.useSelectedOrganizationQuery)(),{mutate:d}=(0,ti.useSendEventMutation)(),u=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:m}=(0,g.useSidebarManagerSnapshot)(),[x,p]=(0,r.useState)(si),y="code"===e||"no-code"===e?e:null,[v,N]=(0,r.useState)(null),S=(()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{data:t}=(0,eu.useSelectedOrganizationQuery)(),s=e?.ref,a=e?.connectionString,i=e?.status===e0.PROJECT_STATUS.ACTIVE_HEALTHY,{data:l}=(0,eX.useTablesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&i}),{data:n}=(0,eX.useTablesQuery)({projectRef:s,connectionString:a,schema:"storage"},{enabled:!!s&&i}),{data:o}=(0,so.useDatabasePoliciesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&!!a&&i}),{data:c}=(0,sl.useAuthConfigQuery)({projectRef:s},{enabled:!!s&&i}),{data:d}=(0,sn.useUsersCountQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&i}),{data:u}=(0,eV.useEdgeFunctionsQuery)({projectRef:s},{enabled:!!s&&i}),{data:h}=(0,tE.useContentInfiniteQuery)({projectRef:s,type:"report",limit:1},{enabled:!!s&&i}),{data:m}=(0,to.useMigrationsQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&i}),{data:x}=er({projectRef:s,interval:"1day"},{enabled:!!s&&i}),{data:p}=(0,sc.useGitHubConnectionsQuery)({organizationId:t?.id},{enabled:!!s&&!!t?.id});return(0,r.useMemo)(()=>{let e=(l?.length??0)>0,t=(m?.length??0)>0,a=(l??[]).some(e=>Number(e?.live_rows_estimate??0)>0),r=(o?.length??0)>0;c&&c.DISABLE_SIGNUP,c?.EXTERNAL_EMAIL_ENABLED;let i=!!d&&!d.is_estimate&&d.count>0,f=(n??[]).some(e=>"objects"===e.name&&Number(e?.live_rows_estimate??0)>0),g=(u?.length??0)>0,j=(h?.pages?.[0]?.content?.length??0)>0,b=p?.some(e=>e.project.ref===s)??!1;return{hasTables:e,hasCliSetup:t,hasSampleData:a,hasRlsPolicies:r,hasAppConnected:x?.result?.some(e=>[e.total_auth_requests,e.total_storage_requests,e.total_rest_requests,e.total_realtime_requests].some(e=>(e??0)>0))??!1,hasFirstUser:i,hasStorageObjects:f,hasEdgeFunctions:g,hasReports:j,hasGitHubConnection:b}},[c,u,p,m,o,h,n,l,x,d,s])})(),_=(0,r.useCallback)((e,t)=>{m(h.SIDEBAR_KEYS.AI_ASSISTANT),u.newChat({name:e,initialInput:t})},[u,m]),w=(0,r.useMemo)(()=>{let e,t,s=a.asPath.split("?")[0],r=tZ.FRAMEWORKS.find(e=>e.key===x);if(!r)return[{label:"Connect",href:`${s}?showConnect=true&connectTab=frameworks`}];if(r.children&&r.children.length>0)if("nextjs"===r.key){let s=r.children.find(e=>"app"===e.key)||r.children[0];e=s?.key,t=s?.children?.[0]?.key}else e=r.children[0]?.key,t=r.children[0]?.children?.[0]?.key;let i=new URLSearchParams({showConnect:"true",connectTab:"frameworks",framework:r.key});return e&&i.set("using",e),t&&i.set("with",t),[{label:"Connect",href:`${s}?${i.toString()}`}]},[a.asPath,x]),C=(0,r.useMemo)(()=>[{label:"Framework selector",component:(0,t.jsx)(t3,{value:x,onChange:p,items:tZ.FRAMEWORKS})},...w.map(e=>({label:"Connect",href:e.href,variant:"primary"}))],[w,x]),k=(0,r.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasCliSetup:l,hasSampleData:n,hasRlsPolicies:c,hasAppConnected:d,hasFirstUser:u,hasStorageObjects:h,hasEdgeFunctions:m,hasReports:x,hasGitHubConnection:p}=r;return[{key:"install-cli",status:l?"complete":"incomplete",title:"Install the Supabase CLI",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To get started, install the Supabase CLI—our command-line toolkit for managing projects locally, handling migrations, and seeding data—using the npm command below to add it to your workspace.",actions:[{label:"Install via npm",component:(0,t.jsx)(sr.CodeBlock,{className:"w-full text-xs p-3 !bg",language:"bash",children:"npm install supabase --save-dev"})}]},{key:"design-db",status:i?"complete":"incomplete",title:"Design your database schema",icon:(0,t.jsx)(ta.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, create a schema file that defines the structure of your database, either following our declarative schema guide or asking the AI assistant to generate one for you.",actions:[{label:"Create schema file",href:`${B.DOCS_URL}/guides/local-development/declarative-database-schemas`,variant:"default"},{label:"Generate it",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","Help me create a schema file for my database. We will be using Supabase declarative schemas which you can learn about by searching docs for declarative schema.")}]},{key:"add-data",status:n?"complete":"incomplete",title:"Seed your database with data",icon:(0,t.jsx)(st.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now, create a seed file to populate your database with initial data, using the docs for guidance or letting the AI assistant draft realistic inserts.",actions:[{label:"Create a seed file",href:`${B.DOCS_URL}/guides/local-development/seeding-your-database`,variant:"default"},{label:"Generate data",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate seed data","Generate SQL INSERT statements for realistic seed data that I can run via the Supabase CLI.")}]},{key:"add-rls-policies",status:c?"complete":"incomplete",title:"Secure your data with RLS policies",icon:(0,t.jsx)(o.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's secure your data by enabling Row Level Security (per-row access rules that decide who can read or write specific records) and defining policies in a migration file, either configuring them manually or letting the AI assistant draft policies for your tables.",actions:[{label:"Create a migration file",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Create policies for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema and guide me through the process of adding them as migration files to my codebase ")}]},{key:"connect-app",status:d?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow with the client library you prefer.",actions:a},{key:"signup-first-user",status:u?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(sa.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication setup by creating the first user account, following the docs if you need a step-by-step walkthrough.",actions:[{label:"Read docs",href:`${B.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:h?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(ss.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Integrate file storage by creating a bucket via SQL and uploading a file using our client libraries.",actions:[{label:"Create a bucket via SQL",href:`${B.DOCS_URL}/guides/storage/buckets/creating-buckets?queryGroups=language&language=sql`,variant:"default"},{label:"Upload a file",href:`${B.DOCS_URL}/guides/storage/uploads/standard-uploads`,variant:"default"}]},{key:"create-edge-function",status:m?"complete":"incomplete",title:"Deploy an Edge Function",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Add server-side logic by creating and deploying your first Edge Function—a lightweight TypeScript or JavaScript function that runs close to your users—then revisit the list to monitor and iterate on it.",actions:[{label:"Create and deploy via CLI",href:`${B.DOCS_URL}/guides/functions/quickstart`,variant:"default"},{label:"View functions",href:`/project/${e}/functions`,variant:"default"}]},{key:"monitor-progress",status:x?"complete":"incomplete",title:"Monitor your project's usage",icon:(0,t.jsx)(se,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Track your project's activity by creating custom reports for API, database, and auth events right from the reports dashboard.",actions:[{label:"Reports",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:p?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(tr.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Link this project to a GitHub repository to keep production in sync and spin up preview branches from pull requests.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:l,openAiChat:_,connectActions:C,statuses:S}),[C,_,l,S]),A=(0,r.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasSampleData:l,hasRlsPolicies:n,hasAppConnected:c,hasFirstUser:d,hasStorageObjects:u,hasEdgeFunctions:h,hasReports:m,hasGitHubConnection:x}=r;return[{key:"design-db",status:i?"complete":"incomplete",title:"Create your first table",icon:(0,t.jsx)(ta.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To kick off your new project, let's start by creating your very first database table using either the table editor or the AI assistant to shape the structure for you.",actions:[{label:"Create a table",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","I want to design my database schema. Please propose tables, relationships, and SQL to create them for my app. Ask clarifying questions if needed.")}]},{key:"add-data",status:l?"complete":"incomplete",title:"Add sample data",icon:(0,t.jsx)(st.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, let's add some sample data that you can play with once you connect your app, either by inserting rows yourself or letting the AI assistant craft realistic examples.",actions:[{label:"Add data",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate sample data","Generate SQL INSERT statements to add realistic sample data to my existing tables. Use safe defaults and avoid overwriting data.")}]},{key:"add-rls-policies",status:n?"complete":"incomplete",title:"Secure your data with Row Level Security",icon:(0,t.jsx)(o.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now that you have some data, let's secure it by enabling Row Level Security (row-specific access rules that control who can view or modify records) and creating policies yourself or with help from the AI assistant.",actions:[{label:"Create a policy",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema. ")}]},{key:"connect-app",status:c?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow to wire up your app.",actions:a},{key:"signup-first-user",status:d?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(sa.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication by signing up your first user, referencing the docs if you need sample flows or troubleshooting tips.",actions:[{label:"Read docs",href:`${B.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:u?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(ss.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's add file storage to your app by creating a bucket and uploading your first file from the buckets dashboard.",actions:[{label:"Buckets",href:`/project/${e}/storage/files`,variant:"default"}]},{key:"create-edge-function",status:h?"complete":"incomplete",title:"Add server-side logic",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Extend your app's functionality by creating an Edge Function—a lightweight serverless function that executes close to your users—for server-side logic directly from the functions page.",actions:[{label:"Create a function",href:`/project/${e}/functions/new`,variant:"default"}]},{key:"monitor-progress",status:m?"complete":"incomplete",title:"Monitor your project's health",icon:(0,t.jsx)(se,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Keep an eye on your project's performance and usage by setting up custom reports from the reports dashboard.",actions:[{label:"Create a report",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:x?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(tr.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Connect your project to GitHub to automatically create preview branches and sync production changes.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:l,openAiChat:_,connectActions:C,statuses:S}),[C,_,l,S]),T="code"===y?k:"no-code"===y?A:[];return(0,t.jsxs)("section",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Getting started"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(t0.ToggleGroup,{type:"single",value:y??void 0,onValueChange:e=>{e&&(N(y),s(e),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"no-code"===e?"no_code":"code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}}))},children:[(0,t.jsxs)(t0.ToggleGroupItem,{value:"no-code","aria-label":"No-code workflow",size:"sm",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(tX.Table2,{size:16,strokeWidth:1.5}),"No-code"]}),(0,t.jsxs)(t0.ToggleGroupItem,{value:"code",size:"sm","aria-label":"Code workflow",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(tJ.Code,{size:16,strokeWidth:1.5}),"Code"]})]}),(0,t.jsx)(F.Button,{size:"tiny",type:"outline",onClick:()=>{if(s("hidden"),y){let e=("code"===y?k:A).filter(e=>"complete"===e.status).length,t=("code"===y?k:A).length;d({action:"home_getting_started_closed",properties:{workflow:"no-code"===y?"no_code":"code",steps_completed:e,total_steps:t},groups:{project:n?.ref||"",organization:c?.slug||""}})}},children:"Dismiss"})]})]}),0===T.length?(0,t.jsxs)(b.Card,{className:"bg-background/25 border-dashed relative",children:[(0,t.jsxs)("div",{className:"absolute -inset-16 z-0 opacity-50",children:[(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block"}),(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-alternative to-transparent"})]}),(0,t.jsxs)(b.CardContent,{className:"relative z-10 p-8 md:p-12 grid lg:grid-cols-2 gap-16 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"heading-subSection mb-0 heading-meta text-foreground-light mb-4",children:"Choose a preferred workflow"}),(0,t.jsx)("p",{className:"text-foreground",children:"With Supabase, you have the flexibility to adopt a workflow that works for you. You can do everything via the dashboard, or manage your entire project within your own codebase."})]}),(0,t.jsxs)("div",{className:"flex items-stretch gap-4",children:[(0,t.jsxs)(F.Button,{size:"medium",type:"outline",onClick:()=>{N(y),s("no-code"),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"no_code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}})},className:"block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start bg-background ",children:[(0,t.jsx)(tX.Table2,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"No-code"}),(0,t.jsx)("div",{className:"text-foreground-light w-full whitespace-normal",children:"Ideal for prototyping or getting your project up and running"})]})]}),(0,t.jsxs)(F.Button,{size:"medium",type:"outline",onClick:()=>{N(y),s("code"),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}})},className:"bg-background block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start",children:[(0,t.jsx)(tJ.Code,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"Code"}),(0,t.jsx)("div",{className:"text-foreground-light whitespace-normal",children:"Ideal for teams that want full control of their project"})]})]})]})]})]}):(0,t.jsx)(t9,{steps:T,onStepClick:({stepIndex:e,stepTitle:t,actionType:s,wasCompleted:a})=>{y&&d({action:"home_getting_started_step_clicked",properties:{workflow:"no-code"===y?"no_code":"code",step_number:e+1,step_title:t,action_type:s,was_completed:a},groups:{project:n?.ref||"",organization:c?.slug||""}})}})]})}var su=e.i(414833),sh=e.i(238921),sm=e.i(390943);let sx={"1hr":{bucketMinutes:2,expectedBuckets:30},"1day":{bucketMinutes:60,expectedBuckets:24},"7day":{bucketMinutes:360,expectedBuckets:28}};var sp=e.i(489051);let sf=()=>{let e=(0,ex.useRouter)(),{ref:l}=(0,i.useParams)(),{data:n}=(0,eu.useSelectedOrganizationQuery)(),{mutate:o}=(0,ti.useSendEventMutation)(),{projectAuthAll:c,projectStorageAll:d}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:u}=(0,ed.useCurrentOrgPlan)(),h=u?.id==="free"?"1hr":"1day",[m,x]=(0,r.useState)(h),[p,f]=(0,r.useState)(0),g=eo.CHART_INTERVALS.find(e=>e.key===m)||eo.CHART_INTERVALS[1],{datetimeFormat:j}=(0,r.useMemo)(()=>({datetimeFormat:g.format||"MMM D, ha"}),[g]),{services:y,isLoading:v,endDate:N}=(0,sm.useServiceHealthMetrics)(l,m,p),S=(0,r.useMemo)(()=>[{key:"db",title:"Database requests",href:`/project/${l}/editor`,route:"/logs/postgres-logs",enabled:!0},{key:"functions",title:"Functions requests",route:"/logs/edge-functions-logs",enabled:!0},{key:"auth",title:"Auth requests",href:`/project/${l}/auth/users`,route:"/logs/auth-logs",enabled:c},{key:"storage",title:"Storage requests",href:`/project/${l}/storage/buckets`,route:"/logs/storage-logs",enabled:d},{key:"realtime",title:"Realtime requests",route:"/logs/realtime-logs",enabled:!0}],[l,c,d]),_=(0,r.useMemo)(()=>S.map(e=>{let t=y[e.key],a=function(e,t,a=new Date){let{bucketMinutes:r,expectedBuckets:i}=sx[t],l=(0,s.default)(a).subtract(i*r,"minute"),n=[],o=l;for(let e=0;e<i;e++)n.push({timestamp:o.toISOString(),ok_count:0,warning_count:0,error_count:0}),o=o.add(r,"minute");if(!e||0===e.length)return n;for(let t of e){let e=Math.floor((0,s.default)(t.timestamp).diff(l,"minute")/r);e<0||e>=i||(n[e].ok_count+=t.ok_count||0,n[e].warning_count+=t.warning_count||0,n[e].error_count+=t.error_count||0)}return n}(t.eventChartData,m,new Date(N)),r=(0,sp.sumTotal)(a),i=(0,sp.sumWarnings)(a),l=(0,sp.sumErrors)(a);return{...e,data:a,total:r,warn:i,err:l,isLoading:t.isLoading,error:t.error}}),[S,y,m,N]).filter(e=>e.enabled),w=_.reduce((e,t)=>e+(t.total||0),0),C=_.reduce((e,t)=>e+(t.err||0),0),k=_.reduce((e,t)=>e+(t.warn||0),0),{successRate:A}=(0,sp.computeSuccessAndNonSuccessRates)(w,k,C);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,t.jsx)("span",{className:"text-foreground",children:w.toLocaleString()}),(0,t.jsx)("span",{children:"Total Requests"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,t.jsxs)("span",{className:"text-foreground",children:[100===A?"100":A.toFixed(1),"%"]}),(0,t.jsx)("span",{children:"Success Rate"})]})]}),(0,t.jsx)(en.ChartIntervalDropdown,{value:m,onChange:e=>x(e),planId:u?.id,planName:u?.name,organizationSlug:n?.slug,dropdownAlign:"end",tooltipSide:"left"})]}),(0,t.jsx)(tv,{columns:[3,2,1],children:_.map(r=>{let i,c;return(0,t.jsxs)(b.Card,{className:"mb-0 md:mb-0 h-full flex flex-col h-64",children:[(0,t.jsxs)(b.CardHeader,{className:"flex flex-row items-end justify-between gap-2 space-y-0 pb-0 border-b-0",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(b.CardTitle,{className:"text-foreground-light",children:r.href?(0,t.jsx)(a.default,{href:r.href,onClick:()=>{l&&n?.slug&&o({action:"home_project_usage_service_clicked",properties:{service_type:r.key,total_requests:r.total||0,error_count:r.err||0},groups:{project:l,organization:n.slug}})},children:r.title}):r.title})}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.total||0).toLocaleString()})]})}),(0,t.jsxs)("div",{className:"flex items-end gap-4 text-foreground-light",children:[(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-warning rounded-full"}),(0,t.jsx)("span",{className:"heading-meta",children:"Warn"})]}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.warn||0).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-destructive rounded-full"}),(0,t.jsx)("span",{className:"heading-meta",children:"Err"})]}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.err||0).toLocaleString()})]})]})]}),(0,t.jsx)(b.CardContent,{className:"p-6 pt-4 flex-1 h-full overflow-hidden",children:(0,t.jsx)(ep.Loading,{isFullHeight:!0,active:v,children:(0,t.jsx)(sh.LogsBarChart,{isFullHeight:!0,data:r.data,DateTimeFormat:j,onBarClick:(i=r.route,c=r.key,t=>{if(!t?.timestamp)return;let a=(0,s.default)(t.timestamp).toISOString(),r=new URLSearchParams({iso_timestamp_start:(0,s.default)(a).subtract(1,"minute").toISOString(),iso_timestamp_end:(0,s.default)(a).add(1,"minute").toISOString()});e.push(`/project/${l}${i}?${r.toString()}`),l&&n?.slug&&o({action:"home_project_usage_chart_clicked",properties:{service_type:c,bar_timestamp:t.timestamp},groups:{project:l,organization:n.slug}})}),EmptyState:(0,t.jsx)(su.default,{size:"small",message:"No data for selected period",isFullHeight:!0})})})})]},r.key)})})]})},sg=()=>{let{enableBranching:e}=(0,i.useParams)(),a=(0,e1.useAppStateSnapshot)(),{data:l}=(0,ei.useSelectedProjectQuery)(),{data:n}=(0,eu.useSelectedOrganizationQuery)(),{mutate:o}=(0,ti.useSendEventMutation)(),c=(0,e7.useFlag)("newHomepageUsageV2"),d=(0,s.default)(l?.inserted_at).isBefore((0,s.default)().subtract(10,"day")),u=(0,r.useRef)(!1),h=l?.status===e0.PROJECT_STATUS.INACTIVE,m=l?.status===e0.PROJECT_STATUS.COMING_UP,[x,p]=(0,tg.useLocalStorage)(`home-section-order-${l?.ref||"default"}`,["getting-started","usage","advisor","custom-report"]),[f,g]=(0,tg.useLocalStorage)(`home-getting-started-${l?.ref||"default"}`,"empty"),j=c?sf:ej,b=(0,e6.useSensors)((0,e6.useSensor)(e6.PointerSensor,{activationConstraint:{distance:8}}));return(0,r.useEffect)(()=>{e&&!u.current&&(u.current=!0,a.setShowCreateBranchModal(!0))},[e,a]),(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsx)(tf.ScaffoldContainer,{size:"large",className:(0,Q.cn)(h&&"h-full"),children:(0,t.jsx)(tf.ScaffoldSection,{isFullWidth:!0,className:(0,Q.cn)(h?"h-full flex justify-center !p-0":"pt-16 pb-0"),children:(0,t.jsx)(tp,{})})}),!h&&(0,t.jsx)(tf.ScaffoldContainer,{size:"large",children:(0,t.jsx)(tf.ScaffoldSection,{isFullWidth:!0,className:"gap-16 pb-32",children:(0,t.jsx)(e6.DndContext,{sensors:b,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&p(e=>{let a=e.indexOf(String(t.id)),r=e.indexOf(String(s.id));return -1===a||-1===r?e:(l?.ref&&n?.slug&&o({action:"home_section_rows_moved",properties:{section_moved:String(t.id),old_position:a,new_position:r},groups:{project:l.ref,organization:n.slug}}),(0,e3.arrayMove)(e,a,r))})},children:(0,t.jsx)(e3.SortableContext,{items:x.filter(e=>"getting-started"!==e||"hidden"!==f),strategy:e3.verticalListSortingStrategy,children:x.map(e=>e8.IS_PLATFORM&&"usage"===e?(0,t.jsx)("div",{className:(0,Q.cn)(m&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(j,{})})},e):"getting-started"===e&&!d&&l&&"hidden"!==f?(0,t.jsx)(te,{id:e,children:(0,t.jsx)(sd,{value:f,onChange:g})},e):"advisor"===e?(0,t.jsx)("div",{className:(0,Q.cn)(m&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(tS,{showEmptyState:m})})},e):"custom-report"===e?(0,t.jsx)("div",{className:(0,Q.cn)(m&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(tV,{})})},e):void 0)})})})})]})};var sj=e.i(448710),sb=e.i(825713),sy=e.i(761755);let sv=()=>"new-home"===(0,sy.usePHFlag)("homeNew")?(0,t.jsx)(sg,{}):(0,t.jsx)(e5,{});sv.getLayout=e=>(0,t.jsx)(sj.default,{children:(0,t.jsx)(sb.ProjectLayoutWithAuth,{children:e})}),e.s(["default",0,sv],421778)},451283,(e,t,s)=>{let a="/project/[ref]";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(421778)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);

//# debugId=f8f958de-9369-a775-233d-608e397e8eb6
//# sourceMappingURL=9de9e21a56c4adf0.js.map