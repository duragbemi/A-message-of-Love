;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b8a0555e-c86b-5703-ad53-0590614912ba")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let s=({resourceText:e,isFullPage:s=!1})=>{let l=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return s?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(l,{})})}):(0,t.jsx)(l,{})};e.s(["NoPermission",0,s,"default",0,s])},347373,(e,t,a)=>{var s=e.r(262523);t.exports=function(e){return(null==e?0:e.length)?s(e,1):[]}},984427,e=>{"use strict";var t=e.i(478902),a=e.i(172650),s=e.i(347373),l=e.i(389959),n=e.i(753515),i=e.i(440401),r=e.i(701823),o=e.i(938933),d=e.i(843778),c=e.i(140449);let u=(0,l.createContext)({onChange:e=>{},selected:void 0});var m=e.i(370410);function p({children:e,className:m,buttonClassName:p,descriptionText:h,error:f,icon:b,id:x="",name:y="",label:g,labelOptional:j,layout:_,value:v,onChange:N,onFocus:w,onBlur:k,style:S,size:T="medium",defaultValue:E,validation:A,disabled:C,optionsWidth:P}){let[z,L]=(0,l.useState)(void 0),[q,I]=(0,l.useState)({}),M=(0,o.default)("listbox"),$=(0,l.useRef)(null),{formContextOnChange:O,values:R,errors:D,handleBlur:U,touched:B,fieldLevelValidation:Q}=(0,c.useFormContext)();R&&!v&&(v=R[x||y],E=R[x||y]),f||(D&&!f&&(f=D[x||y]),f=B&&B[x||y]?f:void 0),(0,l.useEffect)(()=>{void 0!==v&&L(v)},[v]),(0,l.useEffect)(()=>{function e(){document.documentElement.style.setProperty("--width-listbox",`${P||$.current?.offsetWidth}px`)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{let t=(0,s.default)(e);function a(e){return t.find(t=>t.props.value===e)}if(v){L(v);let e=a(v);I(e?.props?e.props:void 0);return}if(z){let e=a(z);I(e?.props?e.props:void 0);return}if(!E)return void I(t[0]?.props);{L(E);let e=a(z);I(e?.props?e.props:void 0);return}},[z]);let F=[M.container,M.base,p],G=[M.addOnBefore];return f&&F.push(M.variants.error),f||F.push(M.variants.standard),b&&G.push(M.with_icon[T]),T&&F.push(M.size[T]),C&&F.push(M.disabled),(0,t.jsx)(n.FormLayout,{label:g,labelOptional:j,layout:_,id:x,error:f,descriptionText:h,className:m,style:S,size:T,children:(0,t.jsxs)(a.Root,{children:[(0,t.jsx)(a.Trigger,{asChild:!0,disabled:C,children:(0,t.jsxs)("button",{"data-size":T,ref:$,className:(0,d.cn)(F),onBlur:function(e){U&&U(e),k&&k(e)},onFocus:w,name:y,id:x,children:[(0,t.jsxs)("span",{className:(0,d.cn)(G),children:[b&&(0,t.jsx)(r.default,{size:T,icon:b}),q?.addOnBefore&&(0,t.jsx)(q.addOnBefore,{}),(0,t.jsx)("span",{className:M.label,children:q?.label})]}),(0,t.jsx)("span",{className:M.chevron_container,children:(0,t.jsx)("svg",{className:M.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),f&&(0,t.jsx)("div",{className:M.actions_container,children:f&&(0,t.jsx)(i.default,{size:T})})]})}),(0,t.jsx)(a.Content,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:M.options_container,children:(0,t.jsx)("div",{children:(0,t.jsx)(u.Provider,{value:{onChange:function(e){N&&N(e),L(e);let t={};t.target={type:"select",name:y,id:x,value:e,checked:void 0},O&&O(t),A&&Q(x,A(e))},selected:z},children:e})})})]})})}p.Option=function({id:e,value:s,label:l,disabled:n=!1,children:i,className:r="",addOnBefore:c}){let p=(0,o.default)("listbox");return(0,t.jsx)(u.Consumer,{children:({onChange:l,selected:o})=>{let u=o===s;return(0,t.jsxs)(a.Item,{className:(0,d.cn)(p.option,u?p.option_active:" ",n?p.option_disabled:" ",r),onSelect:()=>n?{}:l(s),children:[(0,t.jsxs)("div",{className:p.option_inner,children:[c&&c({active:u,selected:o}),(0,t.jsx)("span",{children:"function"==typeof i?i({active:u,selected:o}):i})]}),u?(0,t.jsx)("span",{className:(0,d.cn)(p.option_check,u?p.option_check_active:""),children:(0,t.jsx)(m.Check,{className:p.option_check_icon,"aria-hidden":"true"})}):null]},e)}})},e.s(["default",0,p],984427)},331077,e=>{"use strict";var t=e.i(984427);e.s(["Listbox",()=>t.default])},102703,e=>{"use strict";var t=e.i(478902),a=e.i(17203),s=e.i(180148),l=e.i(699879),n=e.i(210419),i=e.i(389959),r=e.i(837710);let o=(0,i.forwardRef)(({icon:e,title:o,description:d,url:c,urlLabel:u="Read more",defaultVisibility:m=!1,hideCollapse:p=!1,button:h,className:f="",block:b=!1},x)=>{let[y,g]=(0,i.useState)(m);return(0,t.jsx)("div",{ref:x,role:"alert",className:`${b?"block w-full":""}
      block w-full rounded-md border bg-surface-300/25 py-3 ${f}`,children:(0,t.jsxs)("div",{className:"flex flex-col px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[e&&(0,t.jsx)("span",{className:"text-foreground-lighter",children:e}),(0,t.jsx)("div",{className:"flex-grow",children:(0,t.jsx)("h5",{className:"text-foreground",children:o})})]}),d&&!p?(0,t.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>g(!y),children:y?(0,t.jsx)(l.Minimize2,{size:14,strokeWidth:1.5}):(0,t.jsx)(s.Maximize2,{size:14,strokeWidth:1.5})}):null]}),(d||c||h)&&(0,t.jsxs)("div",{className:`flex flex-col space-y-3 overflow-hidden transition-all ${y?"mt-3":""}`,style:{maxHeight:500*!!y},children:[(0,t.jsx)("div",{className:"text-foreground-light text-sm",children:d}),c&&(0,t.jsx)("div",{children:(0,t.jsx)(r.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(a.ExternalLink,{}),children:(0,t.jsx)(n.default,{href:c,target:"_blank",rel:"noreferrer",children:u})})}),h&&(0,t.jsx)("div",{children:h})]})]})})});o.displayName="InformationBox",e.s(["default",0,o])},909410,e=>{"use strict";let t=(0,e.i(388019).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],909410)},300424,e=>{"use strict";var t=e.i(478902),a=e.i(902858),s=e.i(370410),l=e.i(365257),n=e.i(479232),i=e.i(389959),r=e.i(801834),o=e.i(2579),d=e.i(635494),c=e.i(206413),u=e.i(592360),m=e.i(178527),p=e.i(837710),h=e.i(703526),f=e.i(917007),b=e.i(920432),x=e.i(549815),y=e.i(911509),g=e.i(996960),j=e.i(866205),_=e.i(793912),v=e.i(135144),N=e.i(689805),w=e.i(396831),k=e.i(903248);let S=({className:e,disabled:S=!1,size:T="tiny",showError:E=!0,selectedSchemaName:A,supportSelectAll:C=!1,excludedSchemas:P=[],onSelectSchema:z,onSelectCreateSchema:L,align:q="start"})=>{let[I,M]=(0,i.useState)(!1),{can:$}=(0,o.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:O}=(0,d.useSelectedProjectQuery)(),{data:R,isPending:D,isSuccess:U,isError:B,error:Q,refetch:F}=(0,r.useSchemasQuery)({projectRef:O?.ref,connectionString:O?.connectionString}),G=(R||[]).filter(e=>!P.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)("div",{className:e,children:[D&&(0,t.jsx)(p.Button,{type:"default",className:"w-full [&>span]:w-full",size:T,disabled:!0,children:(0,t.jsx)(k.Skeleton,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),E&&B&&(0,t.jsxs)(m.Alert_Shadcn_,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(u.AlertTitle_Shadcn_,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,t.jsxs)(c.AlertDescription_Shadcn_,{className:"text-xs mb-2 break-words",children:["Error: ",Q?.message]}),(0,t.jsx)(p.Button,{type:"default",size:"tiny",onClick:()=>F(),children:"Reload schemas"})]}),U&&(0,t.jsxs)(N.Popover_Shadcn_,{open:I,onOpenChange:M,modal:!1,children:[(0,t.jsx)(v.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(p.Button,{size:T,disabled:S,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,t.jsx)(l.ChevronsUpDown,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:A?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,t.jsx)("p",{className:"text-foreground",children:"*"===A?"All schemas":A})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,t.jsx)(_.PopoverContent_Shadcn_,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:q,sameWidthAsTrigger:!0,children:(0,t.jsxs)(j.Command_Shadcn_,{children:[(0,t.jsx)(b.CommandInput_Shadcn_,{className:"text-xs",placeholder:"Find schema..."}),(0,t.jsxs)(y.CommandList_Shadcn_,{children:[(0,t.jsx)(h.CommandEmpty_Shadcn_,{children:"No schemas found"}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(w.ScrollArea,{className:(G||[]).length>7?"h-[210px]":"",children:[C&&(0,t.jsxs)(x.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{z("*"),M(!1)},onClick:()=>{z("*"),M(!1)},children:[(0,t.jsx)("span",{children:"All schemas"}),"*"===A&&(0,t.jsx)(s.Check,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),G?.map(e=>(0,t.jsxs)(x.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{z(e.name),M(!1)},onClick:()=>{z(e.name),M(!1)},children:[(0,t.jsx)("span",{children:e.name}),A===e.name&&(0,t.jsx)(s.Check,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==L&&$&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.CommandSeparator_Shadcn_,{}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(x.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{L(),M(!1)},onClick:()=>{L(),M(!1)},children:[(0,t.jsx)(n.Plus,{size:12}),"Create a new schema"]})})]})]})]})})]})]})};e.s(["SchemaSelector",0,S,"default",0,S])},983783,e=>{"use strict";var t=e.i(533488),a=e.i(389959);e.i(128328);var s=e.i(947748),l=e.i(158639);e.s(["useQuerySchemaState",0,()=>{var e;let{ref:n}=(0,l.useParams)(),i=n&&n.length>0&&window.localStorage.getItem(s.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(n))||"public",[r,o]=(e=(0,a.useMemo)(()=>i,[n]),(0,t.useQueryState)("schema",t.parseAsString.withDefault(e).withOptions({clearOnDefault:!1})));return(0,a.useEffect)(()=>{n&&n.length>0&&window.localStorage.setItem(s.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(n),r)},[r,n]),{selectedSchema:r,setSelectedSchema:o}}])},892277,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(837710),l=e.i(253214),n=e.i(392491),i=e.i(710483);let r=({onClose:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.DialogHeader,{children:(0,t.jsx)(l.DialogTitle,{children:"Schemas managed by Supabase"})}),(0,t.jsx)(l.DialogSectionSeparator,{}),(0,t.jsxs)(l.DialogSection,{className:"space-y-2 prose",children:[(0,t.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:n.INTERNAL_SCHEMAS.map(e=>(0,t.jsx)("code",{className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,t.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,t.jsx)(l.DialogFooter,{children:(0,t.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,t.jsx)(s.Button,{type:"default",onClick:e,children:"Understood"})})})]});e.s(["ProtectedSchemaWarning",0,({size:e="md",schema:o,entity:d})=>{let[c,u]=(0,a.useState)(!1),{isSchemaLocked:m,reason:p,fdwType:h}=(0,n.useIsProtectedSchema)({schema:o});return m?(0,t.jsx)(i.Admonition,{showIcon:"sm"!==e,layout:"sm"===e?"vertical":"horizontal",type:"note",title:"sm"===e?"Viewing protected schema":`Viewing ${d} from a protected schema`,description:"fdw"===p&&"iceberg"===h?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===p&&"s3_vectors"===h?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is managed by Supabase and is read-only through the dashboard."]}),actions:("fdw"!==p||"iceberg"!==h&&"s3_vectors"!==h)&&(0,t.jsxs)(l.Dialog,{open:c,onOpenChange:u,children:[(0,t.jsx)(l.DialogTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{type:"default",size:"tiny",onClick:()=>u(!0),children:"Learn more"})}),(0,t.jsx)(l.DialogContent,{children:(0,t.jsx)(r,{onClose:()=>u(!1)})})]})}):null}])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:s=3,redaction:l="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,r=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],d=new WeakMap;function c(e){let t=e;for(let{re:e}of o)t=t.replace(e,l);return t}function u(e){return r.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return c(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=s)return n;if("object"==typeof t){if(d.has(t))return"[Circular]";if(Array.isArray(t)){let s=[];d.set(t,s);for(let l=0;l<t.length;l++)s[l]=e(t[l],a+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let s={};for(let[n,i]of(d.set(t,s),Object.entries(t)))u(n)?s[n]=l:s[n]=e(i,a+1);return s}if(t instanceof Map){let s=[];for(let[n,i]of(d.set(t,s),t.entries())){let t=u(n)?l:e(n,a+1),r=u(n)?l:e(i,a+1);s.push([t,r])}return s}if(t instanceof Set){let s=[];for(let l of(d.set(t,s),t.values()))s.push(e(l,a+1));return s}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:c(t.message),stack:n};return d.set(t,e),e}try{return c(String(t))}catch{return c(Object.prototype.toString.call(t))}}return c(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},765672,e=>{"use strict";var t,a,s=e.i(478902),l=e.i(902858),n=e.i(667852),i=e.i(219195),r=e.i(210419),o=e.i(271226),d=e.i(389959),c=e.i(355901);e.i(128328);var u=e.i(947748),m=e.i(158639),p=e.i(448761),h=e.i(888738),f=e.i(602089),b=e.i(837710),x=e.i(378277),y=e.i(843778),g=e.i(613580);let j=(0,e.i(388019).default)("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),_=["Recipe sharing app","Event ticketing system","Fitness tracker","Learning management platform"];var v=e.i(234745),N=e.i(124416),w=e.i(10429),k=((t={}).AI="ai",t.TEMPLATE="template",t),S=((a={}).CONTROL="control",a.AI="ai",a.TEMPLATES="templates",a.ASSISTANT="assistant",a);let T=e=>null!=e,E=e=>{let t;if((t=e).isPrimary||"id"===t.name)return"Primary key"},A=e=>({bigint:"int8",integer:"int4",smallint:"int2",boolean:"bool",text:"text",varchar:"varchar",uuid:"uuid",timestamp:"timestamp",timestamptz:"timestamptz","timestamp with time zone":"timestamptz",date:"date",time:"time",timetz:"timetz","time with time zone":"timetz",json:"json",jsonb:"jsonb",numeric:"numeric",real:"float4","double precision":"float8",bytea:"bytea"})[e.toLowerCase()]||"text",C=e=>Array.isArray(e.tables)?e.tables.map((e,t)=>{if(!e)return null;let a="string"==typeof e.name&&e.name.trim().length>0?e.name:`table_${t+1}`,s=(Array.isArray(e.columns)?e.columns:[]).map((e,t)=>{if(!e)return null;let a="string"==typeof e.name&&e.name.trim().length>0?e.name:`column_${t+1}`;return{name:a,type:A("string"==typeof e.type&&e.type.trim().length>0?e.type:"text"),nullable:e.isNullable??void 0,unique:e.isUnique??void 0,default:e.defaultValue??void 0,description:E({...e,name:a}),isPrimary:e.isPrimary||"id"===a||void 0}}).filter(T);return 0!==s.length||e.name?{tableName:a,fields:s,rationale:"string"==typeof e.description?e.description:void 0,source:k.AI}:null}).filter(T):[],P=e=>{try{return JSON.parse(e)}catch{return null}};function z(e){let t=e.fields.map((t,a)=>{let s=!0===t.isPrimary||"id"===t.name,l="id"===t.name&&t.type.toLowerCase().includes("int")&&!t.default,n=t.default?String(t.default):null;return{id:`column-${a}`,name:t.name,format:t.type,defaultValue:n,isNullable:!1!==t.nullable,isUnique:t.unique??!1,isIdentity:l,isPrimaryKey:s,comment:t.description||"",isNewColumn:!0,table:e.tableName,schema:"public",check:null,isArray:!1,isEncrypted:!1}});return{name:e.tableName,comment:e.rationale||"",columns:t}}var L=e.i(967052);let q=({onSelectTable:e,disabled:t})=>{let[a,l]=(0,d.useState)(""),n=(0,d.useRef)(null),r=(0,L.useTrack)(),{generateTables:o,isGenerating:u,error:m,prompt:p,tables:h,setPrompt:S}=(()=>{let[e,t]=(0,d.useState)(!1),[a,s]=(0,d.useState)(null),[l,n]=(0,N.useLocalStorage)("table-quickstart-ai-results",{prompt:"",tables:[]}),i=(0,d.useRef)(null),r=(0,d.useRef)(!0);(0,d.useEffect)(()=>(r.current=!0,()=>{r.current=!1,i.current&&i.current.abort()}),[]);let o=(0,d.useCallback)(async e=>{if(i.current&&i.current.abort(),e.length>500){let e="Your description is too long. Try shortening it to under 500 characters.";return s(e),c.toast.error("Description too long",{description:e}),[]}let a=new AbortController;i.current=a,t(!0),s(null),n({prompt:e,tables:[]});try{let t=await (0,v.constructHeaders)();t.set("Content-Type","application/json");let l=await (0,v.fetchHandler)(`${w.BASE_PATH}/api/ai/table-quickstart/generate-schemas`,{method:"POST",headers:t,body:JSON.stringify({prompt:e}),signal:a.signal});if(!l.ok){let e=await l.json().catch(()=>({error:"Unable to generate table schema. Try again with a different description."})),t=e?.error||"Unable to generate table schema. Try again with a different description.";return r.current&&s(t),c.toast.error("Unable to generate tables",{description:t}),[]}if(!l.body)throw Error("Response body is null");let i=l.body.getReader(),o=new TextDecoder,d="",u={};try{for(;;){let{done:t,value:a}=await i.read();if(t)break;if((d+=o.decode(a,{stream:!0})).length>51200)throw Error("Response too large");let s=P(d);if(s){Object.assign(u,s);let t=C(u);r.current&&t.length>0&&n({prompt:e,tables:t})}}}finally{i.releaseLock()}d+=o.decode();let m=P(d),p=m?m.tables.map(e=>({tableName:e.name,fields:e.columns.map(e=>({name:e.name,type:A(e.type),nullable:e.isNullable??void 0,unique:e.isUnique??void 0,default:e.defaultValue??void 0,description:E(e),isPrimary:e.isPrimary||"id"===e.name||void 0})),rationale:e.description,source:k.AI})):C(u);return r.current&&(s(null),n({prompt:e,tables:p})),p}catch(t){if(t instanceof Error&&"AbortError"===t.name)return[];let e=t instanceof Error?t.message:"Unable to generate tables. Please try again.";return r.current&&s(e),c.toast.error("Unable to generate tables",{description:e}),[]}finally{r.current&&t(!1),i.current=null}},[]),u=(0,d.useCallback)(()=>{i.current&&(i.current.abort(),i.current=null),t(!1),s(null),n({prompt:"",tables:[]})},[]),m=(0,d.useCallback)(e=>{n(t=>({...t,prompt:e}))},[n]);return{generateTables:o,isGenerating:e,error:a,prompt:l.prompt,tables:l.tables,setPrompt:m,clearTables:u}})(),T=p??"",q=h??[];(0,d.useEffect)(()=>{n.current&&n.current.focus()},[]),(0,d.useEffect)(()=>{T&&q.length>0&&l(T)},[]);let I=(0,d.useCallback)(t=>{r("table_quickstart_template_clicked",{tableName:t.tableName,columnCount:t.fields.length,source:"ai"}),e(z(t)),c.toast.success(`Applied ${t.tableName} template. You can customize the fields below.`,{duration:3e3})},[e,r]),M=(0,d.useCallback)(async({promptOverride:e,wasQuickIdea:t=!1}={})=>{let a=e??T;if(a.trim()&&!u){r("table_quickstart_ai_prompt_submitted",{promptLength:a.length,wasQuickIdea:t});try{let e=await o(a);r("table_quickstart_ai_generation_completed",{success:e.length>0,tablesGenerated:e.length,promptLength:a.length}),l(a)}catch(e){r("table_quickstart_ai_generation_completed",{success:!1,tablesGenerated:0,promptLength:a.length,errorMessage:e instanceof Error?e.message:"Unknown error"})}}},[T,o,u,r]),$=(0,d.useCallback)(e=>{r("table_quickstart_quick_idea_clicked",{ideaText:e}),S(e),M({promptOverride:e,wasQuickIdea:!0})},[M,S,r]);return(0,s.jsxs)("div",{className:"rounded-lg border border-default bg-surface-100 p-6 transition-all hover:border-foreground-muted",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(f.AiIconAnimation,{size:16,loading:!1}),(0,s.jsx)("h3",{className:"text-base font-medium",children:"Generate tables with AI"})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Describe your app and AI will create a complete table schema."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Input_Shadcn_,{ref:n,placeholder:"Describe your app (e.g., 'recipe sharing app')",value:T,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),T.trim()&&M())},disabled:u||t,"aria-label":"Table description for AI generation",className:"pr-24"}),(0,s.jsx)(b.Button,{type:"default",size:"tiny",disabled:!T.trim()||u||t,onClick:()=>M(),icon:(0,s.jsx)(f.AiIconAnimation,{loading:u}),className:"absolute right-1 top-1/2 -translate-y-1/2 !space-x-1",children:u?"Generating...":T===a&&q.length>0?"Regenerate":"Generate"})]}),m&&(0,s.jsx)("div",{className:"text-sm text-red-600",role:"alert",children:m}),0===q.length&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs text-foreground-light mb-2",children:"Quick ideas:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map(e=>(0,s.jsxs)("button",{onClick:()=>$(e),disabled:u||t,"aria-label":`Generate table for ${e}`,className:(0,y.cn)("flex items-center gap-1.5 px-2 py-1 rounded-md text-xs border border-default","hover:border-foreground-muted hover:bg-surface-200","disabled:opacity-50 disabled:cursor-not-allowed","transition-all"),children:[(0,s.jsx)(f.AiIconAnimation,{size:12}),(0,s.jsx)("span",{children:e})]},e))})]}),q.length>0&&(0,s.jsx)("div",{className:"grid gap-2",children:q.map(e=>(0,s.jsx)("button",{onClick:()=>I(e),disabled:t,"aria-label":`Select ${e.tableName} template with ${e.fields.length} fields`,className:(0,y.cn)("text-left p-3 rounded-md border transition-colors w-full bg-surface-100","border-light hover:border-default hover:bg-surface-200 cursor-pointer","disabled:opacity-50 disabled:cursor-not-allowed"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"rounded-full bg-alternative border w-8 h-8 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(i.Table2,{size:16,className:"text-foreground"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-foreground mb-0",children:e.tableName}),e.rationale&&(0,s.jsx)("div",{className:"text-xs text-foreground-light mt-0.5",children:e.rationale})]}),(0,s.jsxs)(g.Tooltip,{children:[(0,s.jsx)(g.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-foreground-muted ml-3",children:[(0,s.jsx)(j,{size:14,"aria-hidden":"true"}),(0,s.jsx)("span",{children:e.fields.length})]})}),(0,s.jsxs)(g.TooltipContent,{children:[e.fields.length," ",1===e.fields.length?"column":"columns"]})]})]})},`ai:${e.tableName}`))})]})]})};var I=e.i(796238);let M={"Social Network":[{tableName:"profiles",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"user_id",type:"uuid",nullable:!1,unique:!0},{name:"username",type:"text",nullable:!0,unique:!0},{name:"display_name",type:"text",nullable:!0},{name:"avatar_url",type:"text",nullable:!0},{name:"bio",type:"text",nullable:!0},{name:"location",type:"text",nullable:!0},{name:"website",type:"text",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores user profile details such as name, avatar, and bio",source:k.TEMPLATE},{tableName:"posts",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"author_id",type:"uuid",nullable:!1},{name:"content",type:"text",nullable:!1},{name:"image_url",type:"text",nullable:!0},{name:"likes_count",type:"int4",nullable:!1,default:"0"},{name:"comments_count",type:"int4",nullable:!1,default:"0"},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores user posts, images, and engagement counts",source:k.TEMPLATE},{tableName:"follows",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"follower_id",type:"uuid",nullable:!1},{name:"following_id",type:"uuid",nullable:!1},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Tracks relationships between followers and followed users",source:k.TEMPLATE}],"E-commerce":[{tableName:"products",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"name",type:"text",nullable:!1},{name:"slug",type:"text",nullable:!1,unique:!0},{name:"description",type:"text",nullable:!0},{name:"price",type:"numeric",nullable:!1},{name:"compare_at_price",type:"numeric",nullable:!0},{name:"cost",type:"numeric",nullable:!0},{name:"sku",type:"text",nullable:!0,unique:!0},{name:"barcode",type:"text",nullable:!0},{name:"stock_quantity",type:"int4",nullable:!1,default:"0"},{name:"weight",type:"numeric",nullable:!0},{name:"published",type:"bool",nullable:!1,default:"false"},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores product details, pricing, and stock levels",source:k.TEMPLATE},{tableName:"orders",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"order_number",type:"text",nullable:!1,unique:!0},{name:"customer_id",type:"uuid",nullable:!1},{name:"status",type:"text",nullable:!1,default:"pending"},{name:"subtotal",type:"numeric",nullable:!1},{name:"tax",type:"numeric",nullable:!1,default:"0"},{name:"shipping",type:"numeric",nullable:!1,default:"0"},{name:"total",type:"numeric",nullable:!1},{name:"notes",type:"text",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Manages customer orders, payment totals, and statuses",source:k.TEMPLATE},{tableName:"cart_items",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"user_id",type:"uuid",nullable:!1},{name:"product_id",type:"uuid",nullable:!1},{name:"quantity",type:"int4",nullable:!1,default:"1"},{name:"added_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Tracks products added to customer shopping carts",source:k.TEMPLATE}],Blog:[{tableName:"articles",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"title",type:"text",nullable:!1},{name:"slug",type:"text",nullable:!1,unique:!0},{name:"content",type:"text",nullable:!0},{name:"excerpt",type:"text",nullable:!0},{name:"cover_image",type:"text",nullable:!0},{name:"author_id",type:"uuid",nullable:!1},{name:"status",type:"text",nullable:!1,default:"'draft'"},{name:"published_at",type:"timestamptz",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores blog posts with author, status, and publish dates",source:k.TEMPLATE},{tableName:"categories",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"name",type:"text",nullable:!1},{name:"slug",type:"text",nullable:!1,unique:!0},{name:"description",type:"text",nullable:!0},{name:"color",type:"text",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Organizes articles into categories or tags for filtering",source:k.TEMPLATE},{tableName:"comments",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"article_id",type:"uuid",nullable:!1},{name:"author_name",type:"text",nullable:!1},{name:"author_email",type:"text",nullable:!1},{name:"content",type:"text",nullable:!1},{name:"approved",type:"bool",nullable:!1,default:"false"},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores reader comments and approval status for moderation",source:k.TEMPLATE}],"To-Do List":[{tableName:"tasks",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"title",type:"text",nullable:!1},{name:"description",type:"text",nullable:!0},{name:"completed",type:"bool",nullable:!1,default:"false"},{name:"priority",type:"text",nullable:!0,default:"medium"},{name:"due_date",type:"date",nullable:!0},{name:"user_id",type:"uuid",nullable:!1},{name:"list_id",type:"uuid",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores user tasks with priorities, due dates, and status",source:k.TEMPLATE},{tableName:"lists",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"name",type:"text",nullable:!1},{name:"description",type:"text",nullable:!0},{name:"color",type:"text",nullable:!0},{name:"icon",type:"text",nullable:!0},{name:"user_id",type:"uuid",nullable:!1},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"},{name:"updated_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Groups tasks into named lists for better organization",source:k.TEMPLATE},{tableName:"subtasks",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"task_id",type:"uuid",nullable:!1},{name:"title",type:"text",nullable:!1},{name:"completed",type:"bool",nullable:!1,default:"false"},{name:"position",type:"int4",nullable:!1,default:"0"},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Tracks smaller subtasks linked to a main task",source:k.TEMPLATE}],Analytics:[{tableName:"events",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"user_id",type:"uuid",nullable:!0},{name:"session_id",type:"text",nullable:!0},{name:"event_type",type:"text",nullable:!1},{name:"properties",type:"jsonb",nullable:!0},{name:"user_agent",type:"text",nullable:!0},{name:"ip_address",type:"text",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Captures user events and properties for analytics tracking",source:k.TEMPLATE},{tableName:"page_views",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"user_id",type:"uuid",nullable:!0},{name:"session_id",type:"text",nullable:!0},{name:"path",type:"text",nullable:!1},{name:"referrer",type:"text",nullable:!0},{name:"duration",type:"int4",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Tracks user page views, referrers, and session info",source:k.TEMPLATE},{tableName:"metrics",fields:[{name:"id",type:"uuid",nullable:!1,isPrimary:!0,default:"gen_random_uuid()"},{name:"metric_name",type:"text",nullable:!1},{name:"value",type:"numeric",nullable:!1},{name:"tags",type:"jsonb",nullable:!0},{name:"timestamp",type:"timestamptz",nullable:!1,default:"now()"},{name:"aggregation_period",type:"text",nullable:!0},{name:"created_at",type:"timestamptz",nullable:!1,default:"now()"}],rationale:"Stores aggregated metrics and KPIs with timestamps",source:k.TEMPLATE}]},$=Object.keys(M),O=({onSelectTemplate:e,disabled:t})=>{let[a,l]=(0,d.useState)(null),n=(0,L.useTrack)();(0,d.useEffect)(()=>{null===a&&$.length>0&&l($[0])},[a]);let r=(0,d.useCallback)(e=>{l(e),n("table_quickstart_category_clicked",{categoryName:e})},[n]),o=(0,d.useCallback)(t=>{n("table_quickstart_template_clicked",{tableName:t.tableName,columnCount:t.fields.length,source:"templates",categoryName:a??"Unknown"}),e(z(t)),c.toast.success(`Applied ${t.tableName} template. You can customize the fields below.`,{duration:3e3})},[e,n,a]),u=a&&M[a]||[];return(0,s.jsxs)("div",{className:"rounded-lg border border-default bg-surface-100 p-6 transition-all hover:border-foreground-muted",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(I.Layers,{size:16,className:"text-foreground"}),(0,s.jsx)("h3",{className:"text-base font-medium",children:"Table quickstarts"})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Select a pre-built schema to get started quickly."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:$.map(e=>(0,s.jsx)("button",{onClick:()=>r(e),disabled:t,role:"tab","aria-selected":a===e,"aria-label":`${e} templates category`,className:(0,y.cn)("px-3 py-1.5 rounded-md text-sm capitalize border transition-all",a===e?"border-foreground bg-surface-200 text-foreground":"border-default hover:border-foreground-muted hover:bg-surface-100 text-foreground-light","disabled:opacity-50 disabled:cursor-not-allowed"),children:e},e))}),u.length>0&&(0,s.jsx)("div",{className:"grid gap-2 pt-1",children:u.map(e=>(0,s.jsx)("button",{onClick:()=>o(e),disabled:t,"aria-label":`Select ${e.tableName} template with ${e.fields.length} fields`,className:(0,y.cn)("text-left p-3 rounded-md border transition-colors w-full bg-surface-100","border-light hover:border-default hover:bg-surface-200 cursor-pointer","disabled:opacity-50 disabled:cursor-not-allowed"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"rounded-full bg-alternative border w-8 h-8 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(i.Table2,{size:16,className:"text-foreground"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-foreground mb-0",children:e.tableName}),e.rationale&&(0,s.jsx)("div",{className:"text-xs text-foreground-light mt-0.5",children:e.rationale})]}),(0,s.jsxs)(g.Tooltip,{children:[(0,s.jsx)(g.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-foreground-muted ml-3",children:[(0,s.jsx)(j,{size:14,"aria-hidden":"true"}),(0,s.jsx)("span",{children:e.fields.length})]})}),(0,s.jsxs)(g.TooltipContent,{children:[e.fields.length," ",1===e.fields.length?"column":"columns"]})]})]})},`${a}:${e.tableName}`))})]})]})};var R=e.i(162082),D=e.i(2579),U=e.i(983783),B=e.i(265735),Q=e.i(635494),F=e.i(761755),G=e.i(392491),W=e.i(48189),K=e.i(432478),H=e.i(317040),Y=e.i(441081),V=e.i(739409),Z=e.i(636047),X=e.i(63519),J=e.i(792459),ee=e.i(283606),et=e.i(314805),ea=e.i(408279),es=e.i(500850),el=e.i(795826),en=e.i(215618),ei=e.i(457395),er=e.i(55956),eo=e.i(809323),ed=e.i(265100),ec=e.i(19583),eu=e.i(528462);function em(){let{ref:e}=(0,m.useParams)(),t=(0,X.useTabsStateSnapshot)(),a=(0,el.useEditorType)();if(!t?.recentItems||!e)return null;let l=(a?t.recentItems.filter(e=>X.editorEntityTypes[a].includes(e.type)):[...t.recentItems]).sort((e,t)=>t.timestamp-e.timestamp);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,s.jsx)("div",{className:"flex flex-col gap-0",children:0===l.length?(0,s.jsxs)(ed.motion.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,s.jsx)(eu.EntityTypeIcon,{type:"r"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,s.jsx)(eo.AnimatePresence,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:l.map((t,a)=>(0,s.jsx)(ed.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*a,duration:.15},children:(0,s.jsxs)(r.default,{href:"sql"===t.type?`/project/${e}/sql/${t.metadata?.sqlId}`:"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?(0,ec.buildTableEditorUrl)({projectRef:e,tableId:t.metadata?.tableId,schema:t.metadata?.schema}):`/project/${e}/explorer/${t.type}/${t.metadata?.schema}/${t.metadata?.name}`,className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,s.jsx)(eu.EntityTypeIcon,{type:t.type})}),(0,s.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:t.metadata?.schema}),t.metadata?.schema&&(0,s.jsx)("span",{className:"text-foreground-light",children:"."}),(0,s.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,s.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,s.jsx)("span",{className:"text-xs text-foreground-lighter",children:(0,er.default)(t.timestamp).fromNow()})]})]})},t.id))})})})]})}function ep(){let e=(0,o.useRouter)(),{ref:t}=(0,m.useParams)(),a=(0,el.useEditorType)(),{profile:x}=(0,K.useProfile)(),{data:g}=(0,B.useSelectedOrganizationQuery)(),{data:j}=(0,Q.useSelectedProjectQuery)(),{selectedSchema:_}=(0,U.useQuerySchemaState)(),{isSchemaLocked:v}=(0,G.useIsProtectedSchema)({schema:_}),w=(0,Z.useTableEditorStateSnapshot)(),k=(0,V.useSqlEditorV2StateSnapshot)(),T=(0,X.useTabsStateSnapshot)(),E=(0,H.useAiAssistantStateSnapshot)(),{openSidebar:A}=(0,Y.useSidebarManagerSnapshot)(),[C,P]=(0,d.useState)(!1),[z]=(0,n.default)(p.SQL_TEMPLATES,{type:"template"}),[I]=(0,n.default)(p.SQL_TEMPLATES,{type:"quickstart"}),[M,$]=(0,N.useLocalStorageQuery)(u.LOCAL_STORAGE_KEYS.TABLE_QUICKSTART_EXPOSURE_TRACKED(String(x?.id??"anonymous")),!1),{mutate:er}=(0,R.useSendEventMutation)(),eo=(0,L.useTrack)(),{can:ed}=(0,D.useAsyncCheckPermissions)(l.PermissionAction.CREATE,"user_content",{resource:{type:"sql",owner_id:x?.id},subject:{id:x?.id}}),ec=(0,F.usePHFlag)("tableQuickstart"),eu="sql"!==a&&ec&&ec!==S.CONTROL?ec:null,ep="sql"!==a&&!!x?.id&&!1!==ec&&void 0!==ec;(0,d.useEffect)(()=>{ep&&!M&&($(!0),eo("table_quickstart_opened",{variant:ec}))},[ep,M,$,ec,eo]);let eh=v?[]:[{icon:(0,s.jsx)(i.Table2,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:()=>w.onAddTable()}],ef=[{icon:(0,s.jsx)(J.SQL_ICON,{className:(0,y.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push(`/project/${t}/sql/new`)}],eb=async(a,s)=>{if(!t)return console.error("Project ref is required");if(!j)return console.error("Project is required");if(!x)return console.error("Profile is required");if(!ed)return(0,c.toast)("Your queries will not be saved as you do not have sufficient permissions");try{let l=(0,h.createSqlSnippetSkeletonV2)({name:s,sql:a,owner_id:x?.id,project_id:j?.id});k.addSnippet({projectRef:t,snippet:l}),k.addNeedsSaving(l.id);let n=(0,X.createTabId)("sql",{id:l.id});T.addTab({id:n,type:"sql",label:s,metadata:{sqlId:l.id}}),e.push(`/project/${t}/sql/${l.id}`)}catch(e){c.toast.error(`Failed to create new query: ${e.message}`)}};return(0,s.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[("sql"===a?ef:eh).map((e,t)=>(0,s.jsx)(ei.ActionCard,{...e},`action-card-${t}`)),eu===S.ASSISTANT&&(0,s.jsx)(ei.ActionCard,{icon:(0,s.jsx)(f.AiIconAnimation,{size:16,loading:C}),title:"Create with Assistant",description:"Use AI to design your database table",bgColor:"bg-brand-200",onClick:()=>{if(!C){P(!0);try{if(A(en.SIDEBAR_KEYS.AI_ASSISTANT),!E.newChat({name:"Create a database table"}))throw eo("table_quickstart_assistant_opened",{chatCreated:!1}),Error("Failed to create chat");let e={id:(0,W.uuidv4)(),role:"user",parts:[{type:"text",text:"Help me create a new database table for my project"}]},t={id:(0,W.uuidv4)(),role:"assistant",parts:[{type:"text",text:"I'll help you create a database table. Please tell me:\n\n1. What does your application do?\n2. What kind of data do you want to store?\n\nI'll suggest a table structure that fits your requirements and help you create it directly in your database."}]};E.saveMessage([e,t]),eo("table_quickstart_assistant_opened",{chatCreated:!0})}catch(t){console.error("Failed to open AI assistant:",t);let e=t instanceof Error?t.message:"Unknown error";c.toast.error(`Unable to open AI assistant: ${e}`)}finally{P(!1)}}}})]}),eu===S.AI&&(0,s.jsx)(q,{onSelectTable:e=>w.onAddTable(e)}),eu===S.TEMPLATES&&(0,s.jsx)(O,{onSelectTemplate:e=>w.onAddTable(e)}),(0,s.jsx)(em,{})]}),"sql"===a&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,s.jsxs)(es.Tabs_Shadcn_,{defaultValue:"templates",children:[(0,s.jsxs)(et.TabsList_Shadcn_,{className:"mx-auto justify-center gap-5",children:[(0,s.jsx)(ea.TabsTrigger_Shadcn_,{value:"templates",children:"Templates"}),(0,s.jsx)(ea.TabsTrigger_Shadcn_,{value:"quickstarts",children:"Quickstarts"})]}),(0,s.jsxs)(ee.TabsContent_Shadcn_,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:z.slice(0,9).map((e,a)=>(0,s.jsx)(ei.ActionCard,{onClick:()=>{eb(e.sql,e.title),er({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:t??"Unknown",organization:g?.slug??"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(J.SQL_ICON,{className:(0,y.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},`action-card-${a}`))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(b.Button,{asChild:!0,type:"default",children:(0,s.jsx)(r.default,{href:`/project/${t}/sql/templates`,children:"View more templates"})})})]}),(0,s.jsxs)(ee.TabsContent_Shadcn_,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:I.map((e,a)=>(0,s.jsx)(ei.ActionCard,{onClick:()=>{eb(e.sql,e.title),er({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:t??"Unknown",organization:g?.slug??"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(J.SQL_ICON,{className:(0,y.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},`action-card-${a}`))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(b.Button,{asChild:!0,type:"default",children:(0,s.jsx)(r.default,{href:`/project/${t}/sql/quickstarts`,children:"View more templates"})})})]})]})})]})}e.s(["NewTab",()=>ep],765672)},830033,e=>{"use strict";var t=e.i(478902),a=e.i(271226),s=e.i(389959);e.i(128328);var l=e.i(158639),n=e.i(19583),i=e.i(565066),r=e.i(448710),o=e.i(569715),d=e.i(111331),c=e.i(207831),u=e.i(765672),m=e.i(990510),p=e.i(983783),h=e.i(63519);let f=()=>{let e=(0,a.useRouter)(),{ref:r}=(0,l.useParams)(),o=(0,h.useTabsStateSnapshot)(),{selectedSchema:d}=(0,p.useQuerySchemaState)(),{history:c,isHistoryLoaded:f}=(0,m.useDashboardHistory)();return(0,s.useEffect)(()=>{if(f&&r&&e){let t=Number(c.editor),a=Number(o.openTabs.find(e=>h.editorEntityTypes.table.includes(o.tabsMap[e]?.type)));if(Number.isInteger(t)){let a=o.tabsMap[t];e.push((0,n.buildTableEditorUrl)({projectRef:r,tableId:t,schema:a?.metadata?.schema}))}else if(Number.isInteger(a)){let t=o.tabsMap[a];e.push((0,n.buildTableEditorUrl)({projectRef:r,tableId:a,schema:t?.metadata?.schema}))}}},[f,r,e]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.NewTab,{}),(0,t.jsx)(i.SidePanelEditor,{onTableCreated:t=>{e.push(`/project/${r}/editor/${t.id}${d?`?schema=${d}`:""}`)}})]})};f.getLayout=e=>(0,t.jsx)(r.DefaultLayout,{children:(0,t.jsx)(o.EditorBaseLayout,{productMenu:(0,t.jsx)(c.TableEditorMenu,{}),product:"Table Editor",productMenuClassName:"overflow-y-hidden",children:(0,t.jsx)(d.TableEditorLayout,{children:e})})}),e.s(["default",0,f])},309956,(e,t,a)=>{let s="/project/[ref]/editor";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(830033)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/4565e01921e9e49e.js","static/chunks/82dddbda1a808189.js","static/chunks/8d0c1acd9ea1c9a1.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))}]);

//# debugId=b8a0555e-c86b-5703-ad53-0590614912ba
//# sourceMappingURL=17fedb324cd70034.js.map